# å¤šUIç‰ˆæœ¬ç®¡ç†æ–¹æ¡ˆï¼šSourceSet + Fragmentç»§æ‰¿æ¨¡å¼

> åˆ›å»ºæ—¶é—´ï¼š2025å¹´1æœˆ  
> é€‚ç”¨åœºæ™¯ï¼šä»£ç é€»è¾‘ç›¸åŒä½†éœ€è¦å¤šä¸ªUIç‰ˆæœ¬çš„Androidåº”ç”¨  
> æŠ€æœ¯æ ˆï¼šGradle SourceSet + Kotlin Fragmentç»§æ‰¿ + MVVMæ¶æ„

---

## ğŸ“‹ ä¸€ã€é—®é¢˜èƒŒæ™¯

åœ¨Androidåº”ç”¨å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä»¥ä¸‹åœºæ™¯ï¼š

- **ä¸åŒå®¢æˆ·éœ€æ±‚**ï¼šåŒä¸€å¥—ä¸šåŠ¡é€»è¾‘ï¼Œä½†UIè®¾è®¡é£æ ¼ä¸åŒ
- **ä¸åŒè½¦å‹é€‚é…**ï¼šåŠŸèƒ½ç›¸åŒï¼Œä½†ç•Œé¢å¸ƒå±€éœ€è¦é€‚é…ä¸åŒè½¦å‹
- **A/Bæµ‹è¯•**ï¼šéœ€è¦åŒæ—¶ç»´æŠ¤å¤šä¸ªUIç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”æµ‹è¯•
- **æ¸è¿›å¼è¿ç§»**ï¼šä»æ—§UIé€æ­¥è¿ç§»åˆ°æ–°UIï¼Œéœ€è¦åŒæ—¶ç»´æŠ¤ä¸¤å¥—

**æ ¸å¿ƒæŒ‘æˆ˜**ï¼š
- âœ… ä¸šåŠ¡é€»è¾‘éœ€è¦å®Œå…¨å¤ç”¨ï¼Œé¿å…é‡å¤ä»£ç 
- âœ… UIç‰ˆæœ¬éœ€è¦å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°
- âœ… ç¼–è¯‘æ—¶ç¡®å®šä½¿ç”¨å“ªä¸ªUIç‰ˆæœ¬ï¼Œé›¶è¿è¡Œæ—¶å¼€é”€
- âœ… æ˜“äºç»´æŠ¤å’Œæ‰©å±•æ–°çš„UIç‰ˆæœ¬

---

## ğŸ¯ äºŒã€è§£å†³æ–¹æ¡ˆæ¦‚è¿°

### 2.0 å¿«é€Ÿå†³ç­–æŒ‡å—

**ä¸çŸ¥é“é€‰å“ªä¸ªæ–¹æ¡ˆï¼Ÿ** æ ¹æ®ä»¥ä¸‹é—®é¢˜å¿«é€Ÿå†³ç­–ï¼š

```
é—®é¢˜1: ä¸šåŠ¡é€»è¾‘ä¼šé¢‘ç¹æ›´æ–°å—ï¼Ÿ
â”œâ”€ æ˜¯ â†’ é€‰æ‹© SourceSetæ–¹æ¡ˆ âœ…
â””â”€ å¦ â†’ ç»§ç»­é—®é¢˜2

é—®é¢˜2: éœ€è¦é•¿æœŸç»´æŠ¤å¤šä¸ªUIç‰ˆæœ¬å—ï¼Ÿ
â”œâ”€ æ˜¯ â†’ é€‰æ‹© SourceSetæ–¹æ¡ˆ âœ…
â””â”€ å¦ â†’ ç»§ç»­é—®é¢˜3

é—®é¢˜3: UIç‰ˆæœ¬å·®å¼‚æå¤§ï¼Œå‡ ä¹å®Œå…¨ä¸åŒçš„åº”ç”¨å—ï¼Ÿ
â”œâ”€ æ˜¯ â†’ é€‰æ‹© Gitåˆ†æ”¯æ–¹æ¡ˆ âš ï¸
â””â”€ å¦ â†’ é€‰æ‹© SourceSetæ–¹æ¡ˆ âœ…

é—®é¢˜4: ä¸åŒUIç‰ˆæœ¬ç”±ä¸åŒå›¢é˜Ÿç‹¬ç«‹ç»´æŠ¤å—ï¼Ÿ
â”œâ”€ æ˜¯ â†’ å¯ä»¥è€ƒè™‘ Gitåˆ†æ”¯æ–¹æ¡ˆ âš ï¸
â””â”€ å¦ â†’ é€‰æ‹© SourceSetæ–¹æ¡ˆ âœ…
```

**ç»“è®º**ï¼šå¯¹äº**90%çš„åœºæ™¯**ï¼Œæ¨èä½¿ç”¨ **SourceSetæ–¹æ¡ˆ**ã€‚

---

æœ¬æ–¹æ¡ˆé‡‡ç”¨ **Gradle SourceSetç¼–è¯‘æ—¶é…ç½®** + **Fragmentç»§æ‰¿æ¨¡æ¿æ–¹æ³•æ¨¡å¼** çš„ç»„åˆï¼š

### 2.1 æ ¸å¿ƒè®¾è®¡æ€è·¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ğŸ“¦ ç¼–è¯‘æ—¶é…ç½® (Gradle SourceSet)              â”‚
â”‚  é€šè¿‡ gradle.properties æˆ–å‘½ä»¤è¡Œå‚æ•°æŒ‡å®š UI_STYLE          â”‚
â”‚  - style1 â†’ ä½¿ç”¨ src/ui_style1/ ç›®å½•                       â”‚
â”‚  - style2 â†’ ä½¿ç”¨ src/ui_style2/ ç›®å½•                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ğŸ—ï¸ ä»£ç ç»“æ„ (Fragmentç»§æ‰¿æ¨¡å¼)                   â”‚
â”‚                                                             â”‚
â”‚  BaseFunctionFragment (åŸºç±»)                                â”‚
â”‚  â”œâ”€â”€ æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ (ViewModelã€Repositoryã€æ•°æ®æµ)           â”‚
â”‚  â”œâ”€â”€ æ¨¡æ¿æ–¹æ³• (setupObserversã€loadDeviceData)              â”‚
â”‚  â””â”€â”€ æŠ½è±¡æ–¹æ³• (getLayoutResIdã€initializeViews)             â”‚
â”‚                                                             â”‚
â”‚  FunctionFragmentStyle1 (å­ç±»1)                            â”‚
â”‚  â””â”€â”€ åªå®ç°UIç›¸å…³æ–¹æ³• (å¸ƒå±€ã€é€‚é…å™¨ã€Viewç»‘å®š)              â”‚
â”‚                                                             â”‚
â”‚  FunctionFragmentStyle2 (å­ç±»2)                            â”‚
â”‚  â””â”€â”€ åªå®ç°UIç›¸å…³æ–¹æ³• (å®Œå…¨ä¸åŒçš„å¸ƒå±€è®¾è®¡)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ–¹æ¡ˆä¼˜åŠ¿

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **ç¼–è¯‘æ—¶ç¡®å®š** | é€šè¿‡SourceSetåœ¨ç¼–è¯‘æ—¶å†³å®šä½¿ç”¨å“ªå¥—UIï¼Œé›¶è¿è¡Œæ—¶å¼€é”€ |
| **ä»£ç å¤ç”¨æœ€å¤§åŒ–** | æ‰€æœ‰ä¸šåŠ¡é€»è¾‘åœ¨åŸºç±»ä¸­ï¼ŒUIç‰ˆæœ¬å®Œå…¨å…±äº« |
| **ç±»å‹å®‰å…¨** | é€šè¿‡typealiasç»Ÿä¸€æ¥å£ï¼Œç¼–è¯‘æ—¶è‡ªåŠ¨è§£æ |
| **UIå®Œå…¨ç‹¬ç«‹** | ä¸¤ä¸ªUIç‰ˆæœ¬çš„å¸ƒå±€ã€é€‚é…å™¨ã€ç»„ä»¶å¯ä»¥å®Œå…¨ä¸åŒ |
| **æ˜“äºç»´æŠ¤** | ä¸šåŠ¡é€»è¾‘ä¿®æ”¹åªéœ€æ”¹åŸºç±»ï¼ŒUIè°ƒæ•´åªæ”¹å¯¹åº”å­ç±» |
| **æ„å»ºçµæ´»** | å¯é€šè¿‡å‘½ä»¤è¡Œã€gradle.propertiesã€ç¯å¢ƒå˜é‡åˆ‡æ¢ |
| **æ‰©å±•æ€§å¼º** | æ·»åŠ æ–°UIç‰ˆæœ¬åªéœ€æ–°å¢ç›®å½•å’Œå¯¹åº”å®ç° |

---

## ğŸ”§ ä¸‰ã€å®æ–½æ­¥éª¤

### 3.1 Gradleé…ç½®

**æ–‡ä»¶ï¼š`tuotuotie/build.gradle.kts`**

```kotlin
android {
    namespace = "com.zkjd.lingdong"
    compileSdk = 34

    defaultConfig {
        minSdk = 28
        targetSdk = 34
        testInstrumentationRunner = "androidx.test.runner.AndroidJUnitRunner"
    }
    
    // è¯»å–é…ç½®å‚æ•°
    val carPlatformType = project.findProperty("CAR_PLATFORM_TYPE") as String? ?: "tinnove"
    val uiStyle = project.findProperty("UI_STYLE") as String? ?: "default"
    
    defaultConfig {
        // å†™å…¥BuildConfigä¾›è¿è¡Œæ—¶ä½¿ç”¨
        buildConfigField("String", "CAR_PLATFORM", "\"$carPlatformType\"")
        buildConfigField("String", "UI_STYLE", "\"$uiStyle\"")
        
        // å¯é€‰ï¼šå†™å…¥èµ„æºå€¼
        resValue("string", "ui_style_name", uiStyle)
    }

    // é…ç½®SourceSet - å…³é”®éƒ¨åˆ†
    sourceSets {
        getByName("main") {
            // åŸºç¡€å…±äº«ä»£ç 
            java.srcDirs("src/main/java")
            res.srcDirs("src/main/res")
            
            // æ ¹æ®UIé£æ ¼åŠ¨æ€æ·»åŠ æºç å’Œèµ„æº
            when (uiStyle) {
                "style1" -> {
                    java.srcDirs("src/ui_style1/java")  // Style1ç‰¹æœ‰çš„Fragmentå®ç°
                    res.srcDirs("src/ui_style1/res")     // Style1ç‰¹æœ‰çš„å¸ƒå±€èµ„æº
                }
                "style2" -> {
                    java.srcDirs("src/ui_style2/java")  // Style2ç‰¹æœ‰çš„Fragmentå®ç°
                    res.srcDirs("src/ui_style2/res")     // Style2ç‰¹æœ‰çš„å¸ƒå±€èµ„æº
                }
                else -> {
                    // ä½¿ç”¨é»˜è®¤çš„UIï¼ˆå·²åœ¨mainä¸­ï¼‰
                }
            }
            
            // æ ¹æ®å¹³å°æ·»åŠ é¢å¤–èµ„æºï¼ˆç°æœ‰æœºåˆ¶ï¼‰
            when (carPlatformType) {
                "tinnove" -> res.srcDirs("src/platform_tinnove/res")
                "meijia" -> res.srcDirs("src/platform_meijia/res")
            }
        }
    }

    buildTypes {
        release {
            isMinifyEnabled = false
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
        }
    }
    
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
    }
    
    kotlinOptions {
        jvmTarget = "11"
        languageVersion = "1.9"
        apiVersion = "1.9"
    }
    
    buildFeatures {
        compose = true
        viewBinding = true
        buildConfig = true
    }
    
    composeOptions {
        kotlinCompilerExtensionVersion = "1.5.1"
    }
    
    lint {
        disable += "MissingPermission"
        abortOnError = false
        checkReleaseBuilds = false
    }
}

dependencies {
    // ... ä¿æŒç°æœ‰çš„ä¾èµ–é…ç½® ...
    
    implementation(project(":tuotuotie_car_interface_library"))
    
    // æ ¹æ®CAR_PLATFORM_TYPEåŠ¨æ€é€‰æ‹©ä¾èµ–
    val carPlatformType = project.findProperty("CAR_PLATFORM_TYPE") as String? ?: "tinnove"
    
    when (carPlatformType) {
        "tinnove" -> {
            implementation(project(":TuoTuoTieTinnoveCarImplLibrary"))
        }
        else -> {
            implementation(project(":TuoTuoTieMeijiaCarImpLibrary"))
        }
    }
    
    // ... å…¶ä»–ä¾èµ–ä¿æŒä¸å˜ ...
}
```

### 3.2 ç›®å½•ç»“æ„

```
tuotuotie/
  src/
    main/
      java/com/zkjd/lingdong/
        ui/
          function/
            base/
              BaseFunctionFragment.kt       # åŸºç±»Fragment - æ‰€æœ‰ä¸šåŠ¡é€»è¾‘
              FunctionFragmentFactory.kt    # Fragmentå·¥å‚ç±»ï¼ˆå¯é€‰ï¼‰
            FunctionViewModel.kt            # å…±äº«çš„ViewModel
        model/
          ButtonFunction.kt
          ButtonType.kt
        repository/
          DeviceRepository.kt
      res/
        values/
          strings.xml                       # å…±äº«çš„å­—ç¬¦ä¸²èµ„æº
          colors.xml                        # å…±äº«çš„é¢œè‰²
        drawable/                           # å…±äº«çš„å›¾æ ‡èµ„æº
    
    ui_style1/
      java/com/zkjd/lingdong/
        ui/
          function/
            FunctionFragment.kt             # Style1çš„Fragmentå®ç°ï¼ˆç±»å‹åˆ«åï¼‰
            FunctionFragmentStyle1.kt       # Style1çš„å…·ä½“å®ç°
      res/
        layout/
          fragment_function.xml             # Style1çš„å¸ƒå±€
          item_function_grid.xml
        values/
          colors_function.xml               # Style1ç‰¹æœ‰é¢œè‰²
          dimens_function.xml               # Style1ç‰¹æœ‰å°ºå¯¸
    
    ui_style2/
      java/com/zkjd/lingdong/
        ui/
          function/
            FunctionFragment.kt             # Style2çš„Fragmentå®ç°ï¼ˆç±»å‹åˆ«åï¼‰
            FunctionFragmentStyle2.kt       # Style2çš„å…·ä½“å®ç°
      res/
        layout/
          fragment_function.xml             # Style2çš„å¸ƒå±€ï¼ˆå®Œå…¨ä¸åŒçš„è®¾è®¡ï¼‰
          item_function_grid.xml
        values/
          colors_function.xml               # Style2ç‰¹æœ‰é¢œè‰²
          dimens_function.xml
    
    platform_tinnove/
      res/
        values/
          platform_config.xml               # Tinnoveå¹³å°ç‰¹æœ‰é…ç½®
    
    platform_meijia/
      res/
        values/
          platform_config.xml               # Meijiaå¹³å°ç‰¹æœ‰é…ç½®
```

### 3.3 åŸºç±»Fragmentå®ç°

**æ–‡ä»¶ï¼š`src/main/java/com/zkjd/lingdong/ui/function/base/BaseFunctionFragment.kt`**

```kotlin
package com.zkjd.lingdong.ui.function.base

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.Toast
import androidx.fragment.app.Fragment
import androidx.fragment.app.viewModels
import androidx.lifecycle.Lifecycle
import androidx.lifecycle.lifecycleScope
import androidx.lifecycle.repeatOnLifecycle
import com.zkjd.lingdong.model.ButtonFunction
import com.zkjd.lingdong.model.ButtonType
import com.zkjd.lingdong.ui.function.FunctionViewModel
import com.zkjd.lingdong.repository.DeviceRepository
import dagger.hilt.android.AndroidEntryPoint
import kotlinx.coroutines.launch
import javax.inject.Inject

/**
 * åŠŸèƒ½é…ç½®FragmentåŸºç±»
 * åŒ…å«æ‰€æœ‰å…±äº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œå­ç±»åªéœ€å®ç°UIç›¸å…³çš„æŠ½è±¡æ–¹æ³•
 */
@AndroidEntryPoint
abstract class BaseFunctionFragment : Fragment() {

    // ViewModel - æ‰€æœ‰ä¸šåŠ¡é€»è¾‘
    protected val viewModel: FunctionViewModel by viewModels()
    
    @Inject
    lateinit var deviceRepository: DeviceRepository
    
    // è®¾å¤‡MACåœ°å€
    protected var deviceMac: String = ""
    
    // å½“å‰é€‰ä¸­çš„åŠŸèƒ½
    protected var selectedFunction: ButtonFunction? = null
    
    // Fragmentä¸Activityé€šä¿¡çš„æ¥å£
    interface FunctionFragmentListener {
        fun onSaveRequested()
        fun onHasUnsavedChanges(hasChanges: Boolean)
    }
    
    protected var listener: FunctionFragmentListener? = null

    companion object {
        const val ARG_DEVICE_MAC = "device_mac"
    }

    // ============ æŠ½è±¡æ–¹æ³• - ç”±å­ç±»å®ç° ============
    
    /**
     * è¿”å›å¸ƒå±€èµ„æºID
     */
    protected abstract fun getLayoutResId(): Int
    
    /**
     * åˆå§‹åŒ–UIæ§ä»¶
     * å­ç±»åœ¨è¿™é‡Œç»‘å®šå…·ä½“çš„View
     */
    protected abstract fun initializeViews(view: View)
    
    /**
     * æ›´æ–°æŒ‰é’®ç±»å‹é€‰æ‹©UI
     */
    protected abstract fun updateButtonTypeSelection(buttonType: ButtonType, isRoty: Boolean)
    
    /**
     * æ›´æ–°åŠŸèƒ½åˆ—è¡¨UI
     */
    protected abstract fun updateFunctionListUI(
        functions: List<ButtonFunction>,
        selectedFunction: ButtonFunction?
    )
    
    /**
     * æ›´æ–°é€‰ä¸­çš„åŠŸèƒ½å¡ç‰‡UI
     */
    protected abstract fun updateSelectedFunctionCardUI(
        buttonType: ButtonType,
        function: ButtonFunction?
    )
    
    /**
     * æ˜¾ç¤ºåº”ç”¨é€‰æ‹©å¯¹è¯æ¡†
     */
    protected abstract fun showAppSelectionDialogUI()
    
    // ============ æ¨¡æ¿æ–¹æ³• - å¯é€‰é‡å†™ ============
    
    /**
     * å½“æŒ‰é’®ç±»å‹æ”¹å˜æ—¶çš„é¢å¤–å¤„ç†
     * å­ç±»å¯ä»¥é‡å†™ä»¥æ·»åŠ è‡ªå®šä¹‰è¡Œä¸º
     */
    protected open fun onButtonTypeChanged(buttonType: ButtonType) {
        // å­ç±»å¯ä»¥é‡å†™
    }
    
    /**
     * å½“è®¾å¤‡ä¿¡æ¯åŠ è½½å®Œæˆæ—¶
     */
    protected open fun onDeviceInfoLoaded(deviceName: String) {
        // å­ç±»å¯ä»¥é‡å†™ä»¥æ›´æ–°æ ‡é¢˜ç­‰
    }

    // ============ Fragmentç”Ÿå‘½å‘¨æœŸ ============
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        arguments?.let {
            deviceMac = it.getString(ARG_DEVICE_MAC) ?: ""
        }
    }

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        return inflater.inflate(getLayoutResId(), container, false)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        
        // è®¾ç½®ç›‘å¬å™¨
        if (activity is FunctionFragmentListener) {
            listener = activity as FunctionFragmentListener
        }
        
        // åˆå§‹åŒ–UIï¼ˆç”±å­ç±»å®ç°ï¼‰
        initializeViews(view)
        
        // è®¾ç½®ä¸šåŠ¡é€»è¾‘è§‚å¯Ÿè€…ï¼ˆå…±äº«ï¼‰
        setupObservers()
        
        // åŠ è½½è®¾å¤‡æ•°æ®
        loadDeviceData()
    }

    // ============ ä¸šåŠ¡é€»è¾‘æ–¹æ³•ï¼ˆå…±äº«ï¼‰ ============
    
    /**
     * åŠ è½½è®¾å¤‡æ•°æ®
     */
    private fun loadDeviceData() {
        lifecycleScope.launch {
            val device = deviceRepository.getDeviceByMacAddress(deviceMac)
            device?.let {
                onDeviceInfoLoaded(it.name ?: "")
            }
        }
        
        // åŠ è½½è®¾å¤‡åŠŸèƒ½é…ç½®
        viewModel.loadDeviceFunctions(deviceMac)
    }
    
    /**
     * è®¾ç½®è§‚å¯Ÿè€… - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
     */
    private fun setupObservers() {
        lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                // ç›‘å¬UIäº‹ä»¶
                launch {
                    viewModel.uiEvents.collect { event ->
                        handleUiEvent(event)
                    }
                }

                // ç›‘å¬æŒ‰é’®ç±»å‹å˜åŒ–
                launch {
                    viewModel.selectedButtonType.collect { buttonType ->
                        onButtonTypeSelectedInternal(buttonType)
                    }
                }

                // ç›‘å¬æ˜¯å¦ä¸ºæ—‹é’®è®¾å¤‡
                launch {
                    viewModel.isRoty.collect { isRoty ->
                        updateButtonTypeSelection(viewModel.selectedButtonType.value, isRoty)
                    }
                }

                // ç›‘å¬ä¸´æ—¶æŒ‰é’®åŠŸèƒ½å˜åŒ–
                launch {
                    viewModel.tempButtonFunctions.collect { tempFunctions ->
                        selectedFunction = tempFunctions[viewModel.selectedButtonType.value]
                        updateSelectedFunctionCardUI(
                            viewModel.selectedButtonType.value,
                            selectedFunction
                        )
                        refreshFunctionList()
                    }
                }

                // ç›‘å¬è½¦å‹é…ç½®å˜åŒ–
                launch {
                    viewModel.useCarTypeName.collect {
                        refreshFunctionList()
                    }
                }

                // ç›‘å¬æ˜¯å¦æœ‰æœªä¿å­˜çš„æ›´æ”¹
                launch {
                    viewModel.isSave.collect { hasUnsavedChanges ->
                        listener?.onHasUnsavedChanges(hasUnsavedChanges)
                    }
                }
            }
        }
    }
    
    /**
     * å¤„ç†UIäº‹ä»¶
     */
    private fun handleUiEvent(event: FunctionViewModel.UiEvent) {
        when (event) {
            is FunctionViewModel.UiEvent.ShowToast -> {
                Toast.makeText(requireContext(), event.message, Toast.LENGTH_SHORT).show()
            }
            is FunctionViewModel.UiEvent.Navigate -> {
                // å¤„ç†å¯¼èˆª
            }
        }
    }
    
    /**
     * æŒ‰é’®ç±»å‹é€‰æ‹©å†…éƒ¨å¤„ç†
     */
    private fun onButtonTypeSelectedInternal(buttonType: ButtonType) {
        selectedFunction = viewModel.tempButtonFunctions.value[buttonType]
        refreshFunctionList()
        updateSelectedFunctionCardUI(buttonType, selectedFunction)
        
        // è°ƒç”¨å­ç±»çš„é¢å¤–å¤„ç†
        onButtonTypeChanged(buttonType)
    }
    
    /**
     * åˆ·æ–°åŠŸèƒ½åˆ—è¡¨
     */
    private fun refreshFunctionList() {
        val functions = viewModel.getAvailableFunctions(requireContext())
        updateFunctionListUI(functions, selectedFunction)
    }

    // ============ å…¬å…±æ–¹æ³•ä¾›å­ç±»è°ƒç”¨ ============
    
    /**
     * é€‰æ‹©åŠŸèƒ½
     */
    protected fun onFunctionSelected(function: ButtonFunction) {
        selectedFunction = function
        viewModel.tempSaveButtonFunction(viewModel.selectedButtonType.value, function)
        viewModel.saveAllButtonFunctions(deviceMac)
    }
    
    /**
     * æ¸…é™¤åŠŸèƒ½
     */
    protected fun onClearFunction() {
        selectedFunction = null
        viewModel.tempSaveButtonFunction(viewModel.selectedButtonType.value, null)
        updateSelectedFunctionCardUI(viewModel.selectedButtonType.value, null)
    }
    
    /**
     * é€‰æ‹©æŒ‰é’®ç±»å‹
     */
    protected fun onButtonTypeSelected(buttonType: ButtonType) {
        viewModel.setSelectedButtonType(buttonType)
    }
    
    /**
     * æ‰“å¼€åº”ç”¨é€‰æ‹©
     */
    protected fun onOpenAppSelection() {
        showAppSelectionDialogUI()
    }
    
    /**
     * ä¿å­˜æ‰€æœ‰åŠŸèƒ½é…ç½®
     */
    fun saveAllButtonFunctions() {
        viewModel.saveAllButtonFunctions(deviceMac)
    }
    
    /**
     * æ£€æŸ¥æ˜¯å¦æœ‰æœªä¿å­˜çš„æ›´æ”¹
     */
    fun hasUnsavedChanges(): Boolean {
        return viewModel.isSave.value == true
    }
}
```

### 3.4 UI Style 1 å®ç°

**æ–‡ä»¶ï¼š`src/ui_style1/java/com/zkjd/lingdong/ui/function/FunctionFragmentStyle1.kt`**

```kotlin
package com.zkjd.lingdong.ui.function

import android.view.View
import android.widget.TextView
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.LinearLayoutManager
import com.zkjd.lingdong.R
import com.zkjd.lingdong.databinding.FragmentFunctionBinding
import com.zkjd.lingdong.model.ButtonFunction
import com.zkjd.lingdong.model.ButtonType
import com.zkjd.lingdong.model.FunctionCategory
import com.zkjd.lingdong.ui.function.base.BaseFunctionFragment
import com.zkjd.lingdong.ui.function_kotlin.AppFindDialog
import com.zkjd.lingdong.ui.function_kotlin.ButtonTypeAdapter
import com.zkjd.lingdong.ui.function_kotlin.FunctionGridAdapter
import com.zkjd.lingdong.model.AppInfo

/**
 * UI Style 1 çš„å…·ä½“å®ç°
 * ä½¿ç”¨ä¼ ç»Ÿçš„RecyclerViewå¸ƒå±€
 */
class FunctionFragmentStyle1 : BaseFunctionFragment() {

    private var _binding: FragmentFunctionBinding? = null
    private val binding get() = _binding!!
    
    private lateinit var buttonTypeAdapter: ButtonTypeAdapter
    private lateinit var functionGridAdapter: FunctionGridAdapter
    private lateinit var tabs: List<TextView>

    companion object {
        fun newInstance(deviceMac: String): FunctionFragmentStyle1 {
            val fragment = FunctionFragmentStyle1()
            val args = android.os.Bundle()
            args.putString(ARG_DEVICE_MAC, deviceMac)
            fragment.arguments = args
            return fragment
        }
    }

    override fun getLayoutResId() = R.layout.fragment_function

    override fun initializeViews(view: View) {
        _binding = FragmentFunctionBinding.bind(view)
        
        // åˆå§‹åŒ–é€‰é¡¹å¡
        tabs = listOf(binding.tab1, binding.tab2, binding.tab3)
        tabs.forEachIndexed { index, tab ->
            tab.setOnClickListener { 
                val buttonType = when(index) {
                    0 -> ButtonType.SHORT_PRESS
                    1 -> ButtonType.DOUBLE_CLICK
                    2 -> ButtonType.LEFT_ROTATE
                    else -> ButtonType.SHORT_PRESS
                }
                onButtonTypeSelected(buttonType)
            }
        }
        
        // è®¾ç½®æŒ‰é’®ç±»å‹RecyclerView
        buttonTypeAdapter = ButtonTypeAdapter { buttonType ->
            onButtonTypeSelected(buttonType)
        }
        binding.rvButtonTypes.apply {
            layoutManager = LinearLayoutManager(requireContext(), LinearLayoutManager.HORIZONTAL, false)
            adapter = buttonTypeAdapter
        }
        
        // è®¾ç½®åŠŸèƒ½ç½‘æ ¼RecyclerView
        functionGridAdapter = FunctionGridAdapter(
            onFunctionSelected = { function ->
                onFunctionSelected(function)
            },
            onAppSelectionRequested = {
                onOpenAppSelection()
            }
        )
        binding.rvFunctionGrid.apply {
            layoutManager = GridLayoutManager(requireContext(), 6)
            adapter = functionGridAdapter
        }
        
        // æ¸…é™¤æŒ‰é’®
        binding.btnClearFunction.setOnClickListener {
            onClearFunction()
        }
    }

    override fun updateButtonTypeSelection(buttonType: ButtonType, isRoty: Boolean) {
        // æ›´æ–°é€‰é¡¹å¡é€‰ä¸­çŠ¶æ€
        tabs.forEachIndexed { index, tab ->
            tab.isSelected = when(buttonType) {
                ButtonType.SHORT_PRESS -> index == 0
                ButtonType.DOUBLE_CLICK -> index == 1
                ButtonType.LEFT_ROTATE -> index == 2
                else -> false
            }
        }
        
        // æ›´æ–°æ—‹é’®ç›¸å…³UIå¯è§æ€§
        tabs[2].visibility = if (isRoty) View.VISIBLE else View.GONE
        binding.switchPreventAccidental.visibility = if (isRoty) View.VISIBLE else View.GONE
        
        // æ›´æ–°é€‚é…å™¨
        buttonTypeAdapter.updateSelectedType(buttonType)
        buttonTypeAdapter.updateIsRoty(isRoty)
    }

    override fun updateFunctionListUI(
        functions: List<ButtonFunction>,
        selectedFunction: ButtonFunction?
    ) {
        functionGridAdapter.updateFunctions(functions, selectedFunction)
    }

    override fun updateSelectedFunctionCardUI(
        buttonType: ButtonType,
        function: ButtonFunction?
    ) {
        // æ›´æ–°æ ‡é¢˜
        binding.tvButtonTypeTitle.text = when (buttonType) {
            ButtonType.SHORT_PRESS -> "çŸ­æŒ‰åŠŸèƒ½"
            ButtonType.LONG_PRESS -> "é•¿æŒ‰åŠŸèƒ½"
            ButtonType.DOUBLE_CLICK -> "åŒå‡»åŠŸèƒ½"
            ButtonType.LEFT_ROTATE -> "æ—‹è½¬åŠŸèƒ½ (å·¦æ—‹)"
            ButtonType.RIGHT_ROTATE -> "æ—‹è½¬åŠŸèƒ½ (å³æ—‹)"
            else -> ""
        }
        
        // æ›´æ–°åŠŸèƒ½åç§°
        if (function != null) {
            binding.tvFunctionName.text = when {
                function.category == FunctionCategory.APP -> function.name
                else -> function.name ?: "æ— "
            }
            binding.btnClearFunction.visibility = View.VISIBLE
        } else {
            binding.tvFunctionName.text = "æ— "
            binding.btnClearFunction.visibility = View.GONE
        }
        
        // æ›´æ–°åŠŸèƒ½æŒ‰é’®æ˜¾ç¤º
        updateFunctionButtons()
        
        // æ›´æ–°ç½‘æ ¼é€‰ä¸­çŠ¶æ€
        functionGridAdapter.updateSelectedFunction(function)
    }
    
    private fun updateFunctionButtons() {
        viewModel.tempButtonFunctions.value.forEach { (buttonType, function) ->
            val name = when (buttonType) {
                ButtonType.SHORT_PRESS -> "çŸ­æŒ‰"
                ButtonType.DOUBLE_CLICK -> "åŒå‡»"
                ButtonType.LEFT_ROTATE -> "æ—‹è½¬"
                else -> null
            }
            
            val btn = when (buttonType) {
                ButtonType.SHORT_PRESS -> binding.buttonPoint1
                ButtonType.DOUBLE_CLICK -> binding.buttonPoint2
                ButtonType.LEFT_ROTATE -> binding.buttonPoint3
                else -> null
            }
            
            btn?.text = if (function != null) {
                "$name: ${function.name}"
            } else {
                "$name: æ— "
            }
        }
    }

    override fun showAppSelectionDialogUI() {
        val dialog = AppFindDialog(activity, null)
        dialog.setListener(object : AppFindDialog.OnAppSelectedListener {
            override fun onAppSelected(appInfo: AppInfo) {
                val function = ButtonFunction(
                    id = "app_${appInfo.packageName}",
                    category = FunctionCategory.APP,
                    name = appInfo.appName,
                    actionCode = "APP_${appInfo.packageName}",
                    iconResId = 0,
                    configWords = ""
                )
                onFunctionSelected(function)
                dialog.dismiss()
            }
        })
        dialog.show(childFragmentManager, "app_selection_dialog")
    }
    
    override fun onDeviceInfoLoaded(deviceName: String) {
        _binding?.titleCenter?.text = deviceName
    }

    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null
    }
}
```

**æ–‡ä»¶ï¼š`src/ui_style1/java/com/zkjd/lingdong/ui/function/FunctionFragment.kt`ï¼ˆç±»å‹åˆ«åï¼‰**

```kotlin
package com.zkjd.lingdong.ui.function

// ç±»å‹åˆ«åï¼Œè®©å¤–éƒ¨ä»£ç ç»Ÿä¸€ä½¿ç”¨ FunctionFragment
typealias FunctionFragment = FunctionFragmentStyle1
```

### 3.5 UI Style 2 å®ç°

**æ–‡ä»¶ï¼š`src/ui_style2/java/com/zkjd/lingdong/ui/function/FunctionFragmentStyle2.kt`**

```kotlin
package com.zkjd.lingdong.ui.function

import android.view.View
import androidx.recyclerview.widget.LinearLayoutManager
import com.zkjd.lingdong.R
import com.zkjd.lingdong.databinding.FragmentFunctionBinding
import com.zkjd.lingdong.model.ButtonFunction
import com.zkjd.lingdong.model.ButtonType
import com.zkjd.lingdong.ui.function.base.BaseFunctionFragment

/**
 * UI Style 2 çš„å…·ä½“å®ç°
 * ä½¿ç”¨å®Œå…¨ä¸åŒçš„å¸ƒå±€è®¾è®¡ï¼ˆæ¯”å¦‚å¡ç‰‡å¼ã€åˆ—è¡¨å¼ç­‰ï¼‰
 */
class FunctionFragmentStyle2 : BaseFunctionFragment() {

    private var _binding: FragmentFunctionBinding? = null
    private val binding get() = _binding!!
    
    // Style2å¯èƒ½ä½¿ç”¨ä¸åŒçš„é€‚é…å™¨æˆ–ç»„ä»¶
    private lateinit var modernFunctionAdapter: ModernFunctionAdapter

    companion object {
        fun newInstance(deviceMac: String): FunctionFragmentStyle2 {
            val fragment = FunctionFragmentStyle2()
            val args = android.os.Bundle()
            args.putString(ARG_DEVICE_MAC, deviceMac)
            fragment.arguments = args
            return fragment
        }
    }

    override fun getLayoutResId() = R.layout.fragment_function  // Style2çš„å¸ƒå±€

    override fun initializeViews(view: View) {
        _binding = FragmentFunctionBinding.bind(view)
        
        // Style2çš„UIåˆå§‹åŒ–é€»è¾‘ï¼ˆå®Œå…¨ä¸åŒï¼‰
        // ä¾‹å¦‚ï¼šä½¿ç”¨ViewPagerã€å¡ç‰‡å¼å¸ƒå±€ç­‰
        
        // ç¤ºä¾‹ï¼šä½¿ç”¨ä¸åŒçš„é€‚é…å™¨
        modernFunctionAdapter = ModernFunctionAdapter { function ->
            onFunctionSelected(function)
        }
        
        binding.rvFunctionList.apply {
            layoutManager = LinearLayoutManager(requireContext())
            adapter = modernFunctionAdapter
        }
    }

    override fun updateButtonTypeSelection(buttonType: ButtonType, isRoty: Boolean) {
        // Style2çš„æŒ‰é’®ç±»å‹é€‰æ‹©UIæ›´æ–°
        // å¯èƒ½ä½¿ç”¨BottomSheetã€Chipç­‰ä¸åŒçš„UIç»„ä»¶
    }

    override fun updateFunctionListUI(
        functions: List<ButtonFunction>,
        selectedFunction: ButtonFunction?
    ) {
        // Style2çš„åŠŸèƒ½åˆ—è¡¨æ›´æ–°
        modernFunctionAdapter.submitList(functions)
    }

    override fun updateSelectedFunctionCardUI(
        buttonType: ButtonType,
        function: ButtonFunction?
    ) {
        // Style2çš„é€‰ä¸­åŠŸèƒ½å¡ç‰‡æ›´æ–°
        // å¯èƒ½ä½¿ç”¨MaterialCardã€åŠ¨ç”»æ•ˆæœç­‰
    }

    override fun showAppSelectionDialogUI() {
        // Style2çš„åº”ç”¨é€‰æ‹©UI
        // å¯èƒ½ä½¿ç”¨BottomSheetDialogã€è‡ªå®šä¹‰Dialogç­‰
    }

    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null
    }
}
```

**æ–‡ä»¶ï¼š`src/ui_style2/java/com/zkjd/lingdong/ui/function/FunctionFragment.kt`ï¼ˆç±»å‹åˆ«åï¼‰**

```kotlin
package com.zkjd.lingdong.ui.function

// Style2çš„ç±»å‹åˆ«å
typealias FunctionFragment = FunctionFragmentStyle2
```

### 3.6 Activityä¿æŒä¸å˜

**æ–‡ä»¶ï¼š`FunctionActivity.kt`**

```kotlin
@AndroidEntryPoint
class FunctionActivity : AppCompatActivity(), BaseFunctionFragment.FunctionFragmentListener {
    
    private lateinit var binding: ActivityFunctionBinding
    private var functionFragment: BaseFunctionFragment? = null  // ä½¿ç”¨åŸºç±»ç±»å‹
    
    private fun setupFragment() {
        // ç›´æ¥ä½¿ç”¨ FunctionFragmentï¼ˆç¼–è¯‘æ—¶ä¼šè§£æä¸ºå¯¹åº”çš„å®ç°ï¼‰
        functionFragment = FunctionFragment.newInstance(deviceMac)
        supportFragmentManager.beginTransaction()
            .replace(R.id.fragment_container, functionFragment!!)
            .commit()
    }
    
    // ... å…¶ä»–ä»£ç ä¿æŒä¸å˜ ...
}
```

### 3.7 é…ç½®æ–‡ä»¶

**æ–‡ä»¶ï¼š`gradle.properties`**

```properties
# UIé£æ ¼é…ç½®
# å¯é€‰å€¼: default, style1, style2
UI_STYLE=style1

# å¹³å°é…ç½®
CAR_PLATFORM_TYPE=tinnove

# Android é…ç½®
android.useAndroidX=true
android.enableJetifier=true
```

---

## ğŸš€ å››ã€ä½¿ç”¨æ–¹å¼

### 4.1 ç¼–è¯‘å‘½ä»¤

```bash
# ä½¿ç”¨UI Style 1ç¼–è¯‘
./gradlew assembleDebug -PUI_STYLE=style1

# ä½¿ç”¨UI Style 2ç¼–è¯‘
./gradlew assembleDebug -PUI_STYLE=style2

# ç»„åˆé…ç½®ï¼šUI Style 2 + Meijiaå¹³å°
./gradlew assembleRelease -PUI_STYLE=style2 -PCAR_PLATFORM_TYPE=meijia

# æ¸…ç†åé‡æ–°ç¼–è¯‘
./gradlew clean assembleDebug -PUI_STYLE=style1

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„æ„å»ºå˜ä½“
./gradlew tasks --all | grep assemble
```

### 4.2 åœ¨gradle.propertiesä¸­è®¾ç½®é»˜è®¤å€¼

```properties
# gradle.properties
UI_STYLE=style1
CAR_PLATFORM_TYPE=tinnove
```

ç„¶åç›´æ¥è¿è¡Œï¼š
```bash
./gradlew assembleDebug  # ä½¿ç”¨é»˜è®¤é…ç½®
```

### 4.3 CI/CDé…ç½®ç¤ºä¾‹

**GitLab CI (.gitlab-ci.yml)**
```yaml
build_style1:
  script:
    - ./gradlew assembleRelease -PUI_STYLE=style1 -PCAR_PLATFORM_TYPE=tinnove

build_style2:
  script:
    - ./gradlew assembleRelease -PUI_STYLE=style2 -PCAR_PLATFORM_TYPE=meijia
```

**Jenkins Pipeline**
```groovy
pipeline {
    stages {
        stage('Build Style1') {
            steps {
                sh './gradlew assembleRelease -PUI_STYLE=style1'
            }
        }
        stage('Build Style2') {
            steps {
                sh './gradlew assembleRelease -PUI_STYLE=style2'
            }
        }
    }
}
```

---

## ğŸ“Š äº”ã€æ–¹æ¡ˆå¯¹æ¯”

### 5.1 Gitåˆ†æ”¯æ–¹æ¡ˆè¯¦è§£

#### 5.1.1 Gitåˆ†æ”¯æ–¹æ¡ˆçš„åšæ³•

**åŸºæœ¬æ€è·¯**ï¼šä¸ºæ¯ä¸ªUIç‰ˆæœ¬åˆ›å»ºç‹¬ç«‹çš„Gitåˆ†æ”¯ï¼Œåœ¨å„è‡ªåˆ†æ”¯ä¸­ç»´æŠ¤ä¸åŒçš„UIä»£ç ã€‚

```
main (ä¸»åˆ†æ”¯)
â”œâ”€â”€ feature/ui-style1 (UIé£æ ¼1åˆ†æ”¯)
â”‚   â”œâ”€â”€ FunctionFragment.kt (Style1å®ç°)
â”‚   â””â”€â”€ fragment_function.xml (Style1å¸ƒå±€)
â”‚
â””â”€â”€ feature/ui-style2 (UIé£æ ¼2åˆ†æ”¯)
    â”œâ”€â”€ FunctionFragment.kt (Style2å®ç°)
    â””â”€â”€ fragment_function.xml (Style2å¸ƒå±€)
```

**å·¥ä½œæµç¨‹**ï¼š
```bash
# åˆ›å»ºUIé£æ ¼1åˆ†æ”¯
git checkout -b feature/ui-style1
# åœ¨åˆ†æ”¯ä¸­å®ç°Style1çš„UIä»£ç 
git commit -m "å®ç°UIé£æ ¼1"

# åˆ›å»ºUIé£æ ¼2åˆ†æ”¯
git checkout main
git checkout -b feature/ui-style2
# åœ¨åˆ†æ”¯ä¸­å®ç°Style2çš„UIä»£ç 
git commit -m "å®ç°UIé£æ ¼2"

# åˆå¹¶ä¸šåŠ¡é€»è¾‘æ›´æ–°ï¼ˆä»mainåˆ†æ”¯ï¼‰
git checkout feature/ui-style1
git merge main  # åˆå¹¶ä¸šåŠ¡é€»è¾‘æ›´æ–°
```

#### 5.1.2 Gitåˆ†æ”¯æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**ï¼š
- âœ… **å®Œå…¨éš”ç¦»**ï¼šä¸åŒUIç‰ˆæœ¬ä»£ç å®Œå…¨åˆ†ç¦»ï¼Œäº’ä¸å¹²æ‰°
- âœ… **ç‰ˆæœ¬æ§åˆ¶æ¸…æ™°**ï¼šæ¯ä¸ªUIç‰ˆæœ¬çš„å˜æ›´å†å²ç‹¬ç«‹
- âœ… **æ˜“äºå›æ»š**ï¼šå¯ä»¥è½»æ¾å›æ»šåˆ°ä»»æ„ç‰ˆæœ¬çš„UI
- âœ… **å¹¶è¡Œå¼€å‘**ï¼šä¸åŒUIç‰ˆæœ¬å¯ä»¥å¹¶è¡Œå¼€å‘ï¼Œäº’ä¸å½±å“
- âœ… **æ— éœ€é‡æ„**ï¼šä¸éœ€è¦æ”¹å˜ç°æœ‰ä»£ç ç»“æ„

**ç¼ºç‚¹**ï¼š
- âŒ **ä»£ç åŒæ­¥å›°éš¾**ï¼šä¸šåŠ¡é€»è¾‘æ›´æ–°éœ€è¦æ‰‹åŠ¨åˆå¹¶åˆ°æ¯ä¸ªåˆ†æ”¯
- âŒ **åˆå¹¶å†²çªé¢‘ç¹**ï¼šä¸šåŠ¡é€»è¾‘ä¿®æ”¹æ—¶ï¼Œå¤šä¸ªåˆ†æ”¯å®¹æ˜“å‡ºç°å†²çª
- âŒ **ç»´æŠ¤æˆæœ¬é«˜**ï¼šéœ€è¦åŒæ—¶ç»´æŠ¤å¤šä¸ªåˆ†æ”¯ï¼Œå®¹æ˜“é—æ¼æŸä¸ªåˆ†æ”¯çš„æ›´æ–°
- âŒ **æµ‹è¯•å¤æ‚**ï¼šéœ€è¦ä¸ºæ¯ä¸ªåˆ†æ”¯å•ç‹¬æµ‹è¯•
- âŒ **CI/CDå¤æ‚**ï¼šéœ€è¦ä¸ºæ¯ä¸ªåˆ†æ”¯é…ç½®ç‹¬ç«‹çš„æ„å»ºæµç¨‹
- âŒ **ä»£ç é‡å¤é£é™©**ï¼šå®¹æ˜“åœ¨ä¸åŒåˆ†æ”¯ä¸­é‡å¤å®ç°ç›¸åŒçš„ä¸šåŠ¡é€»è¾‘
- âŒ **å›¢é˜Ÿåä½œå›°éš¾**ï¼šå¤šäººåä½œæ—¶å®¹æ˜“åœ¨é”™è¯¯çš„åˆ†æ”¯ä¸Šå·¥ä½œ

#### 5.1.3 Gitåˆ†æ”¯æ–¹æ¡ˆé€‚ç”¨åœºæ™¯

**é€‚åˆä½¿ç”¨Gitåˆ†æ”¯çš„åœºæ™¯**ï¼š
- âœ… UIç‰ˆæœ¬å·®å¼‚**æå¤§**ï¼Œå‡ ä¹å®Œå…¨ä¸åŒçš„åº”ç”¨
- âœ… UIç‰ˆæœ¬æ˜¯**ä¸´æ—¶æ€§**çš„ï¼ˆå¦‚A/Bæµ‹è¯•çš„çŸ­æœŸå®éªŒï¼‰
- âœ… ä¸åŒUIç‰ˆæœ¬ç”±**ä¸åŒå›¢é˜Ÿ**ç‹¬ç«‹ç»´æŠ¤
- âœ… UIç‰ˆæœ¬ä¹‹é—´**ä¸éœ€è¦å…±äº«**ä¸šåŠ¡é€»è¾‘æ›´æ–°

**ä¸é€‚åˆä½¿ç”¨Gitåˆ†æ”¯çš„åœºæ™¯**ï¼š
- âŒ ä¸šåŠ¡é€»è¾‘éœ€è¦**é¢‘ç¹æ›´æ–°**ï¼ˆä¼šå¯¼è‡´å¤§é‡åˆå¹¶å†²çªï¼‰
- âŒ éœ€è¦**é•¿æœŸç»´æŠ¤**å¤šä¸ªUIç‰ˆæœ¬
- âŒ UIç‰ˆæœ¬ä¹‹é—´**å…±äº«å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘**
- âŒ å›¢é˜Ÿè§„æ¨¡**è¾ƒå°**ï¼Œæ— æ³•åŒæ—¶ç»´æŠ¤å¤šä¸ªåˆ†æ”¯

### 5.2 Viewæ¥å£æ–¹å¼ vs Fragmentç»§æ‰¿æ–¹å¼

#### 5.2.1 Viewæ¥å£æ–¹å¼è¯¦è§£

**åŸºæœ¬æ€è·¯**ï¼šå®šä¹‰Viewæ¥å£ï¼Œä¸åŒUIå®ç°ç±»å®ç°è¯¥æ¥å£ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥æˆ–å·¥å‚æ¨¡å¼é€‰æ‹©å®ç°ã€‚

**å®ç°ç¤ºä¾‹**ï¼š

```kotlin
// 1. å®šä¹‰Viewæ¥å£
interface FunctionView {
    fun showLoading()
    fun hideLoading()
    fun updateFunctionList(functions: List<ButtonFunction>)
    fun updateSelectedFunction(function: ButtonFunction?)
    fun showError(message: String)
    fun showAppSelectionDialog()
}

// 2. å®ç°ç±»1 - Style1
class FunctionViewStyle1(
    private val rootView: View,
    private val viewModel: FunctionViewModel
) : FunctionView {
    
    private val binding = FragmentFunctionBinding.bind(rootView)
    
    override fun showLoading() {
        binding.progressBar.visibility = View.VISIBLE
    }
    
    override fun hideLoading() {
        binding.progressBar.visibility = View.GONE
    }
    
    override fun updateFunctionList(functions: List<ButtonFunction>) {
        // Style1çš„åˆ—è¡¨æ›´æ–°é€»è¾‘
        binding.rvFunctionGrid.adapter?.notifyDataSetChanged()
    }
    
    // ... å…¶ä»–æ–¹æ³•å®ç°
}

// 3. å®ç°ç±»2 - Style2
class FunctionViewStyle2(
    private val rootView: View,
    private val viewModel: FunctionViewModel
) : FunctionView {
    
    private val binding = FragmentFunctionBinding.bind(rootView)
    
    override fun showLoading() {
        // Style2çš„åŠ è½½æ˜¾ç¤ºé€»è¾‘
    }
    
    // ... å…¶ä»–æ–¹æ³•å®ç°
}

// 4. Fragmentä¸­ä½¿ç”¨
class FunctionFragment : Fragment() {
    
    private val viewModel: FunctionViewModel by viewModels()
    private lateinit var functionView: FunctionView
    
    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        val rootView = inflater.inflate(R.layout.fragment_function, container, false)
        
        // æ ¹æ®é…ç½®é€‰æ‹©Viewå®ç°
        val uiStyle = BuildConfig.UI_STYLE
        functionView = when (uiStyle) {
            "style1" -> FunctionViewStyle1(rootView, viewModel)
            "style2" -> FunctionViewStyle2(rootView, viewModel)
            else -> FunctionViewStyle1(rootView, viewModel)
        }
        
        return rootView
    }
    
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        
        // è§‚å¯ŸViewModelï¼Œè°ƒç”¨Viewæ¥å£æ–¹æ³•
        lifecycleScope.launch {
            viewModel.functions.collect { functions ->
                functionView.updateFunctionList(functions)
            }
        }
    }
}
```

#### 5.2.2 Fragmentç»§æ‰¿æ–¹å¼ï¼ˆæ–‡æ¡£å·²æœ‰æ–¹æ¡ˆï¼‰

**åŸºæœ¬æ€è·¯**ï¼šåŸºç±»FragmentåŒ…å«æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œå­ç±»Fragmentåªå®ç°UIç›¸å…³æ–¹æ³•ã€‚

**å®ç°ç¤ºä¾‹**ï¼š

```kotlin
// åŸºç±» - æ‰€æœ‰ä¸šåŠ¡é€»è¾‘
abstract class BaseFunctionFragment : Fragment() {
    protected val viewModel: FunctionViewModel by viewModels()
    
    // æŠ½è±¡æ–¹æ³• - å­ç±»å®ç°
    protected abstract fun updateFunctionListUI(functions: List<ButtonFunction>)
    protected abstract fun updateSelectedFunctionCardUI(function: ButtonFunction?)
    
    // ä¸šåŠ¡é€»è¾‘ - å…±äº«
    private fun setupObservers() {
        lifecycleScope.launch {
            viewModel.functions.collect { functions ->
                updateFunctionListUI(functions)  // è°ƒç”¨å­ç±»å®ç°
            }
        }
    }
}

// å­ç±»1 - Style1
class FunctionFragmentStyle1 : BaseFunctionFragment() {
    override fun updateFunctionListUI(functions: List<ButtonFunction>) {
        // Style1çš„å®ç°
    }
}

// å­ç±»2 - Style2
class FunctionFragmentStyle2 : BaseFunctionFragment() {
    override fun updateFunctionListUI(functions: List<ButtonFunction>) {
        // Style2çš„å®ç°
    }
}
```

#### 5.2.3 ä¸¤ç§æ–¹å¼è¯¦ç»†å¯¹æ¯”

| å¯¹æ¯”ç»´åº¦ | Viewæ¥å£æ–¹å¼ | Fragmentç»§æ‰¿æ–¹å¼ |
|---------|-------------|------------------|
| **æ¶æ„æ¨¡å¼** | ç»„åˆæ¨¡å¼ï¼ˆCompositionï¼‰ | ç»§æ‰¿æ¨¡å¼ï¼ˆInheritanceï¼‰ |
| **ä»£ç ç»„ç»‡** | Viewé€»è¾‘ä¸Fragmentåˆ†ç¦» | Viewé€»è¾‘åœ¨Fragmentå­ç±»ä¸­ |
| **ä¸šåŠ¡é€»è¾‘ä½ç½®** | Fragmentä¸­ | åŸºç±»Fragmentä¸­ |
| **UIå®ç°ä½ç½®** | ç‹¬ç«‹çš„Viewå®ç°ç±» | Fragmentå­ç±»ä¸­ |
| **ç”Ÿå‘½å‘¨æœŸç®¡ç†** | Fragmentç®¡ç† | Fragmentè‡ªåŠ¨ç®¡ç† |
| **ViewBindingä½¿ç”¨** | åœ¨Viewå®ç°ç±»ä¸­ | åœ¨Fragmentå­ç±»ä¸­ |
| **ä¾èµ–æ³¨å…¥** | éœ€è¦æ³¨å…¥Viewå®ç° | é€šè¿‡SourceSetç¼–è¯‘æ—¶é€‰æ‹© |
| **ç±»å‹å®‰å…¨** | æ¥å£çº¦æŸï¼Œç¼–è¯‘æ—¶æ£€æŸ¥ | ç»§æ‰¿çº¦æŸï¼Œç¼–è¯‘æ—¶æ£€æŸ¥ |
| **ä»£ç å¤ç”¨** | ä¸šåŠ¡é€»è¾‘åœ¨Fragmentä¸­å¤ç”¨ | ä¸šåŠ¡é€»è¾‘åœ¨åŸºç±»ä¸­å¤ç”¨ |
| **æµ‹è¯•éš¾åº¦** | ä¸­ç­‰ï¼ˆéœ€è¦Mock Viewï¼‰ | ä¸­ç­‰ï¼ˆéœ€è¦Mock Fragmentï¼‰ |
| **æ‰©å±•æ€§** | å¥½ï¼ˆæ–°å¢Viewå®ç°ç±»ï¼‰ | å¥½ï¼ˆæ–°å¢Fragmentå­ç±»ï¼‰ |

#### 5.2.4 ä¼˜ç¼ºç‚¹å¯¹æ¯”

**Viewæ¥å£æ–¹å¼çš„ä¼˜ç‚¹**ï¼š
- âœ… **èŒè´£åˆ†ç¦»æ›´æ¸…æ™°**ï¼šViewé€»è¾‘ä¸Fragmentå®Œå…¨åˆ†ç¦»
- âœ… **æ›´ç¬¦åˆSOLIDåŸåˆ™**ï¼šå•ä¸€èŒè´£ï¼Œä¾èµ–å€’ç½®
- âœ… **æ˜“äºå•å…ƒæµ‹è¯•**ï¼šViewå®ç°ç±»å¯ä»¥ç‹¬ç«‹æµ‹è¯•
- âœ… **è¿è¡Œæ—¶åˆ‡æ¢çµæ´»**ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢Viewå®ç°
- âœ… **Viewå¤ç”¨æ€§å¼º**ï¼šåŒä¸€ä¸ªViewå®ç°å¯ä»¥åœ¨å¤šä¸ªFragmentä¸­ä½¿ç”¨

**Viewæ¥å£æ–¹å¼çš„ç¼ºç‚¹**ï¼š
- âŒ **ä»£ç ç»“æ„æ›´å¤æ‚**ï¼šéœ€è¦ç»´æŠ¤æ¥å£ã€å®ç°ç±»ã€Fragmentä¸‰å±‚
- âŒ **ç”Ÿå‘½å‘¨æœŸç®¡ç†å¤æ‚**ï¼šViewå®ç°ç±»éœ€è¦æ‰‹åŠ¨å¤„ç†ç”Ÿå‘½å‘¨æœŸ
- âŒ **ViewBindingä½¿ç”¨ä¸ä¾¿**ï¼šéœ€è¦åœ¨Viewå®ç°ç±»ä¸­ç®¡ç†Binding
- âŒ **FragmentèŒè´£è¾ƒé‡**ï¼šFragmentéœ€è¦åè°ƒViewModelå’ŒView
- âŒ **ç¼–è¯‘æ—¶é€‰æ‹©éœ€è¦é¢å¤–é…ç½®**ï¼šéœ€è¦ä¾èµ–æ³¨å…¥æˆ–å·¥å‚æ¨¡å¼

**Fragmentç»§æ‰¿æ–¹å¼çš„ä¼˜ç‚¹**ï¼š
- âœ… **ä»£ç ç»“æ„ç®€å•**ï¼šåŸºç±»+å­ç±»ï¼Œç»“æ„æ¸…æ™°
- âœ… **ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨ç®¡ç†**ï¼šFragmentè‡ªåŠ¨å¤„ç†ç”Ÿå‘½å‘¨æœŸ
- âœ… **ViewBindingä½¿ç”¨æ–¹ä¾¿**ï¼šç›´æ¥åœ¨Fragmentå­ç±»ä¸­ä½¿ç”¨
- âœ… **ç¼–è¯‘æ—¶é€‰æ‹©ç®€å•**ï¼šé€šè¿‡SourceSetç›´æ¥é€‰æ‹©
- âœ… **AndroidåŸç”Ÿæ”¯æŒ**ï¼šå®Œå…¨ç¬¦åˆAndroidå¼€å‘æ¨¡å¼

**Fragmentç»§æ‰¿æ–¹å¼çš„ç¼ºç‚¹**ï¼š
- âŒ **èŒè´£è€¦åˆ**ï¼šFragmentæ—¢ç®¡ç†ä¸šåŠ¡é€»è¾‘åˆç®¡ç†UI
- âŒ **æµ‹è¯•ç¨å¤æ‚**ï¼šéœ€è¦æµ‹è¯•Fragmentå­ç±»
- âŒ **Viewå¤ç”¨æ€§å·®**ï¼šViewé€»è¾‘ç»‘å®šåœ¨Fragmentä¸­

#### 5.2.5 é€‚ç”¨åœºæ™¯å¯¹æ¯”

**é€‰æ‹©Viewæ¥å£æ–¹å¼ï¼Œå¦‚æœ**ï¼š
- âœ… éœ€è¦**è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢**UIç‰ˆæœ¬
- âœ… Viewé€»è¾‘éœ€è¦åœ¨**å¤šä¸ªFragmentä¸­å¤ç”¨**
- âœ… å›¢é˜Ÿæ›´å€¾å‘äº**ç»„åˆä¼˜äºç»§æ‰¿**çš„è®¾è®¡ç†å¿µ
- âœ… éœ€è¦**é«˜åº¦è§£è€¦**çš„æ¶æ„è®¾è®¡
- âœ… Viewé€»è¾‘**éå¸¸å¤æ‚**ï¼Œéœ€è¦ç‹¬ç«‹ç®¡ç†

**é€‰æ‹©Fragmentç»§æ‰¿æ–¹å¼ï¼Œå¦‚æœ**ï¼š
- âœ… UIç‰ˆæœ¬åœ¨**ç¼–è¯‘æ—¶ç¡®å®š**ï¼ˆæ¨èï¼‰
- âœ… æ¯ä¸ªFragmentæœ‰**ç‹¬ç‰¹çš„Viewé€»è¾‘**ï¼Œä¸éœ€è¦å¤ç”¨
- âœ… å¸Œæœ›**ä»£ç ç»“æ„ç®€å•**ï¼Œæ˜“äºç†è§£
- âœ… å›¢é˜Ÿç†Ÿæ‚‰**Android Fragmentå¼€å‘æ¨¡å¼**
- âœ… éœ€è¦**å¿«é€Ÿå®ç°**å¤šUIç‰ˆæœ¬ç®¡ç†

#### 5.2.6 ç»¼åˆæ¨è

**å¯¹äºä½ çš„åœºæ™¯ï¼ˆä»£ç é€»è¾‘ç›¸åŒï¼ŒUIæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼‰**ï¼š

| æ–¹æ¡ˆ | æ¨èåº¦ | ç†ç”± |
|------|--------|------|
| **Fragmentç»§æ‰¿æ–¹å¼** | â­â­â­â­â­ | ä»£ç ç»“æ„ç®€å•ï¼Œç¼–è¯‘æ—¶ç¡®å®šï¼Œç¬¦åˆAndroidå¼€å‘ä¹ æƒ¯ |
| **Viewæ¥å£æ–¹å¼** | â­â­â­â­ | æ¶æ„æ›´ä¼˜é›…ï¼Œä½†å®ç°å¤æ‚åº¦è¾ƒé«˜ |

**æœ€ç»ˆå»ºè®®**ï¼š
- **ä¼˜å…ˆé€‰æ‹©Fragmentç»§æ‰¿æ–¹å¼**ï¼šç®€å•ã€ç›´æ¥ã€ç¬¦åˆAndroidå¼€å‘ä¹ æƒ¯
- **å¦‚æœæœªæ¥éœ€è¦è¿è¡Œæ—¶åˆ‡æ¢**ï¼šå¯ä»¥è€ƒè™‘è¿ç§»åˆ°Viewæ¥å£æ–¹å¼
- **å¦‚æœViewé€»è¾‘éå¸¸å¤æ‚**ï¼šå¯ä»¥è€ƒè™‘æ··åˆä½¿ç”¨ï¼Œå¤æ‚Viewç”¨æ¥å£ï¼Œç®€å•Viewç”¨ç»§æ‰¿

### 5.3 ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ | æ¨èåº¦ |
|------|------|------|----------|--------|
| **SourceSet + Fragmentç»§æ‰¿** | ç¼–è¯‘æ—¶ç¡®å®šã€ä»£ç å¤ç”¨é«˜ã€ç±»å‹å®‰å…¨ã€ç»´æŠ¤æˆæœ¬ä½ | éœ€è¦é‡æ„ç°æœ‰ä»£ç  | âœ… **æ¨èï¼šå¤šUIç‰ˆæœ¬é•¿æœŸç»´æŠ¤** | â­â­â­â­â­ |
| **SourceSet + Viewæ¥å£** | èŒè´£åˆ†ç¦»æ¸…æ™°ã€ç¬¦åˆSOLIDåŸåˆ™ã€æ˜“äºæµ‹è¯• | ä»£ç ç»“æ„å¤æ‚ã€å®ç°æˆæœ¬é«˜ | éœ€è¦é«˜åº¦è§£è€¦æˆ–è¿è¡Œæ—¶åˆ‡æ¢ | â­â­â­â­ |
| **Gitåˆ†æ”¯** | å®Œå…¨éš”ç¦»ã€ç‰ˆæœ¬æ§åˆ¶æ¸…æ™°ã€æ— éœ€é‡æ„ | ä»£ç åŒæ­¥å›°éš¾ã€åˆå¹¶å†²çªé¢‘ç¹ã€ç»´æŠ¤æˆæœ¬é«˜ | UIå·®å¼‚æå¤§æˆ–ä¸´æ—¶æ€§å®éªŒ | â­â­â­ |
| è¿è¡Œæ—¶åˆ‡æ¢ | çµæ´»ã€æ— éœ€é‡æ–°ç¼–è¯‘ | è¿è¡Œæ—¶å¼€é”€ã€ä»£ç å¤æ‚ | éœ€è¦åŠ¨æ€åˆ‡æ¢çš„åœºæ™¯ | â­â­â­ |
| å®Œå…¨ç‹¬ç«‹æ¨¡å— | å®Œå…¨éš”ç¦» | ä»£ç é‡å¤ã€ç»´æŠ¤æˆæœ¬é«˜ | ä¸æ¨è | â­ |
| Product Flavors | å®˜æ–¹æ”¯æŒã€èµ„æºéš”ç¦»å¥½ | æ„å»ºå˜ä½“å¤šã€é…ç½®å¤æ‚ | ä¸åŒåº”ç”¨IDçš„åœºæ™¯ | â­â­â­â­ |

### 5.4 è¯¦ç»†å¯¹æ¯”è¡¨

#### 5.4.1 å¼€å‘æ•ˆç‡å¯¹æ¯”

| ç»´åº¦ | Fragmentç»§æ‰¿ | Viewæ¥å£ | Gitåˆ†æ”¯ | è¿è¡Œæ—¶åˆ‡æ¢ |
|------|-------------|---------|---------|-----------|
| **ä»£ç å¤ç”¨ç‡** | 100%ï¼ˆä¸šåŠ¡é€»è¾‘å®Œå…¨å…±äº«ï¼‰ | 100%ï¼ˆä¸šåŠ¡é€»è¾‘å®Œå…¨å…±äº«ï¼‰ | 0%ï¼ˆéœ€è¦æ‰‹åŠ¨åŒæ­¥ï¼‰ | 100%ï¼ˆä¸šåŠ¡é€»è¾‘å®Œå…¨å…±äº«ï¼‰ |
| **ä¸šåŠ¡é€»è¾‘æ›´æ–°** | ä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰UIç‰ˆæœ¬è‡ªåŠ¨æ›´æ–° | ä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰UIç‰ˆæœ¬è‡ªåŠ¨æ›´æ–° | éœ€è¦æ‰‹åŠ¨åˆå¹¶åˆ°æ¯ä¸ªåˆ†æ”¯ | ä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰UIç‰ˆæœ¬è‡ªåŠ¨æ›´æ–° |
| **åˆå¹¶å†²çªé¢‘ç‡** | æ—  | æ—  | é«˜ï¼ˆä¸šåŠ¡é€»è¾‘æ›´æ–°æ—¶ï¼‰ | æ—  |
| **ä»£ç åŒæ­¥æˆæœ¬** | é›¶æˆæœ¬ | é›¶æˆæœ¬ | é«˜æˆæœ¬ï¼ˆéœ€è¦é¢‘ç¹mergeï¼‰ | é›¶æˆæœ¬ |
| **å­¦ä¹ æ›²çº¿** | ä¸­ç­‰ï¼ˆéœ€è¦ç†è§£SourceSetå’Œç»§æ‰¿ï¼‰ | è¾ƒé«˜ï¼ˆéœ€è¦ç†è§£æ¥å£å’Œç»„åˆæ¨¡å¼ï¼‰ | ä½ï¼ˆæ ‡å‡†Gitæµç¨‹ï¼‰ | é«˜ï¼ˆéœ€è¦ç†è§£è¿è¡Œæ—¶åˆ‡æ¢é€»è¾‘ï¼‰ |
| **å®ç°å¤æ‚åº¦** | ä¸­ç­‰ | è¾ƒé«˜ï¼ˆéœ€è¦ç»´æŠ¤æ¥å£å’Œå®ç°ç±»ï¼‰ | ä½ï¼ˆä½†ç»´æŠ¤å¤æ‚ï¼‰ | é«˜ |

#### 5.4.2 ç»´æŠ¤æˆæœ¬å¯¹æ¯”

| ç»´åº¦ | Fragmentç»§æ‰¿ | Viewæ¥å£ | Gitåˆ†æ”¯ | è¿è¡Œæ—¶åˆ‡æ¢ |
|------|-------------|---------|---------|-----------|
| **æ—¥å¸¸ç»´æŠ¤** | ä½ï¼ˆåªéœ€ç»´æŠ¤ä¸€å¥—ä¸šåŠ¡é€»è¾‘ï¼‰ | ä¸­ï¼ˆéœ€è¦ç»´æŠ¤æ¥å£å’Œå®ç°ç±»ï¼‰ | é«˜ï¼ˆéœ€è¦ç»´æŠ¤å¤šä¸ªåˆ†æ”¯ï¼‰ | ä¸­ï¼ˆéœ€è¦ç»´æŠ¤åˆ‡æ¢é€»è¾‘ï¼‰ |
| **Bugä¿®å¤** | ä¿®å¤ä¸€æ¬¡ï¼Œæ‰€æœ‰ç‰ˆæœ¬å—ç›Š | ä¿®å¤ä¸€æ¬¡ï¼Œæ‰€æœ‰ç‰ˆæœ¬å—ç›Š | éœ€è¦åœ¨æ¯ä¸ªåˆ†æ”¯åˆ†åˆ«ä¿®å¤ | ä¿®å¤ä¸€æ¬¡ï¼Œæ‰€æœ‰ç‰ˆæœ¬å—ç›Š |
| **æ–°åŠŸèƒ½å¼€å‘** | å¼€å‘ä¸€æ¬¡ï¼Œæ‰€æœ‰ç‰ˆæœ¬å¯ç”¨ | å¼€å‘ä¸€æ¬¡ï¼Œæ‰€æœ‰ç‰ˆæœ¬å¯ç”¨ | éœ€è¦åˆå¹¶åˆ°æ¯ä¸ªåˆ†æ”¯ | å¼€å‘ä¸€æ¬¡ï¼Œæ‰€æœ‰ç‰ˆæœ¬å¯ç”¨ |
| **æµ‹è¯•å·¥ä½œé‡** | ä½ï¼ˆä¸šåŠ¡é€»è¾‘æµ‹è¯•ä¸€æ¬¡ï¼‰ | ä¸­ï¼ˆéœ€è¦æµ‹è¯•æ¥å£å’Œå®ç°ï¼‰ | é«˜ï¼ˆæ¯ä¸ªåˆ†æ”¯éƒ½éœ€è¦æµ‹è¯•ï¼‰ | ä¸­ï¼ˆéœ€è¦æµ‹è¯•åˆ‡æ¢é€»è¾‘ï¼‰ |
| **CI/CDé…ç½®** | ç®€å•ï¼ˆä¸€ä¸ªé…ç½®ï¼Œå¤šä¸ªæ„å»ºï¼‰ | ç®€å•ï¼ˆä¸€ä¸ªé…ç½®ï¼Œå¤šä¸ªæ„å»ºï¼‰ | å¤æ‚ï¼ˆæ¯ä¸ªåˆ†æ”¯ç‹¬ç«‹é…ç½®ï¼‰ | ç®€å•ï¼ˆä¸€ä¸ªé…ç½®ï¼‰ |

#### 5.4.3 æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | Fragmentç»§æ‰¿ | Viewæ¥å£ | Gitåˆ†æ”¯ | è¿è¡Œæ—¶åˆ‡æ¢ |
|------|-------------|---------|---------|-----------|
| **ç¼–è¯‘äº§ç‰©å¤§å°** | åªåŒ…å«é€‰ä¸­çš„UI | åªåŒ…å«é€‰ä¸­çš„UI | åªåŒ…å«å½“å‰åˆ†æ”¯çš„UI | åŒ…å«æ‰€æœ‰UI |
| **è¿è¡Œæ—¶å†…å­˜** | æ— é¢å¤–å¼€é”€ | æ— é¢å¤–å¼€é”€ï¼ˆç¼–è¯‘æ—¶é€‰æ‹©ï¼‰ | æ— é¢å¤–å¼€é”€ | æœ‰é¢å¤–å¼€é”€ |
| **å¯åŠ¨é€Ÿåº¦** | æ­£å¸¸ | æ­£å¸¸ | æ­£å¸¸ | å¯èƒ½ç¨æ…¢ |
| **ä»£ç å¤æ‚åº¦** | ä¸­ç­‰ | è¾ƒé«˜ | ä½ï¼ˆä½†ç»´æŠ¤å¤æ‚ï¼‰ | è¾ƒé«˜ |
| **æ„å»ºæ—¶é—´** | æ­£å¸¸ | æ­£å¸¸ | æ­£å¸¸ | æ­£å¸¸ |

#### 5.4.4 å›¢é˜Ÿåä½œå¯¹æ¯”

| ç»´åº¦ | Fragmentç»§æ‰¿ | Viewæ¥å£ | Gitåˆ†æ”¯ | è¿è¡Œæ—¶åˆ‡æ¢ |
|------|-------------|---------|---------|-----------|
| **åˆ†æ”¯ç®¡ç†** | ç®€å•ï¼ˆå•ä¸€ä¸»åˆ†æ”¯ï¼‰ | ç®€å•ï¼ˆå•ä¸€ä¸»åˆ†æ”¯ï¼‰ | å¤æ‚ï¼ˆå¤šä¸ªé•¿æœŸåˆ†æ”¯ï¼‰ | ç®€å•ï¼ˆå•ä¸€ä¸»åˆ†æ”¯ï¼‰ |
| **ä»£ç å®¡æŸ¥** | ç®€å•ï¼ˆä¸€æ¬¡å®¡æŸ¥ï¼‰ | ä¸­ç­‰ï¼ˆéœ€è¦å®¡æŸ¥æ¥å£å’Œå®ç°ï¼‰ | å¤æ‚ï¼ˆéœ€è¦å®¡æŸ¥å¤šä¸ªåˆ†æ”¯ï¼‰ | ç®€å•ï¼ˆä¸€æ¬¡å®¡æŸ¥ï¼‰ |
| **åä½œå†²çª** | ä½ | ä½ | é«˜ï¼ˆåˆ†æ”¯åˆå¹¶å†²çªï¼‰ | ä½ |
| **çŸ¥è¯†å…±äº«** | é«˜ï¼ˆä»£ç é›†ä¸­ï¼‰ | é«˜ï¼ˆä»£ç é›†ä¸­ï¼‰ | ä½ï¼ˆä»£ç åˆ†æ•£ï¼‰ | é«˜ï¼ˆä»£ç é›†ä¸­ï¼‰ |
| **æ¶æ„ç†è§£** | ä¸­ç­‰ï¼ˆéœ€è¦ç†è§£ç»§æ‰¿ï¼‰ | è¾ƒé«˜ï¼ˆéœ€è¦ç†è§£æ¥å£å’Œç»„åˆï¼‰ | ä½ | é«˜ |

#### 5.4.5 æ¶æ„è®¾è®¡å¯¹æ¯”

| ç»´åº¦ | Fragmentç»§æ‰¿ | Viewæ¥å£ | Gitåˆ†æ”¯ | è¿è¡Œæ—¶åˆ‡æ¢ |
|------|-------------|---------|---------|-----------|
| **è®¾è®¡æ¨¡å¼** | æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€ç»§æ‰¿ | ç­–ç•¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ | æ— ï¼ˆä»£ç åˆ†ç¦»ï¼‰ | ç­–ç•¥æ¨¡å¼ã€å·¥å‚æ¨¡å¼ |
| **SOLIDåŸåˆ™** | ç¬¦åˆï¼ˆå¼€é—­åŸåˆ™ï¼‰ | é«˜åº¦ç¬¦åˆï¼ˆä¾èµ–å€’ç½®ã€å•ä¸€èŒè´£ï¼‰ | ä¸ç¬¦åˆï¼ˆä»£ç é‡å¤ï¼‰ | ç¬¦åˆï¼ˆå¼€é—­åŸåˆ™ï¼‰ |
| **èŒè´£åˆ†ç¦»** | ä¸­ç­‰ï¼ˆFragmentç®¡ç†ä¸šåŠ¡å’ŒUIï¼‰ | é«˜ï¼ˆViewå’ŒFragmentåˆ†ç¦»ï¼‰ | ä½ï¼ˆä»£ç åˆ†æ•£ï¼‰ | ä¸­ç­‰ |
| **å¯æµ‹è¯•æ€§** | ä¸­ç­‰ | é«˜ï¼ˆViewå®ç°å¯ç‹¬ç«‹æµ‹è¯•ï¼‰ | ä½ | ä¸­ç­‰ |
| **æ‰©å±•æ€§** | å¥½ï¼ˆæ–°å¢Fragmentå­ç±»ï¼‰ | å¥½ï¼ˆæ–°å¢Viewå®ç°ç±»ï¼‰ | å·®ï¼ˆéœ€è¦æ–°åˆ†æ”¯ï¼‰ | å¥½ï¼ˆæ–°å¢ç­–ç•¥å®ç°ï¼‰ |

---

## âš ï¸ å…­ã€æ³¨æ„äº‹é¡¹

### 6.1 èµ„æºå‘½åè§„èŒƒ

- **å…±äº«èµ„æº**ï¼šæ”¾åœ¨ `src/main/res/` ä¸­
- **UIç‰¹æœ‰èµ„æº**ï¼šæ”¾åœ¨å¯¹åº”çš„ `src/ui_styleX/res/` ä¸­
- **èµ„æºIDå¿…é¡»ä¸€è‡´**ï¼šå¦‚æœä¸¤ä¸ªUIç‰ˆæœ¬ä½¿ç”¨ç›¸åŒçš„View IDï¼Œå¿…é¡»ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç±»å‹åˆ«åå¤±æ•ˆ

### 6.2 ä»£ç ç»„ç»‡åŸåˆ™

1. **ä¸šåŠ¡é€»è¾‘**ï¼šå…¨éƒ¨æ”¾åœ¨ `BaseFunctionFragment` ä¸­
2. **UIå®ç°**ï¼šåªæ”¾åœ¨å­ç±»ä¸­
3. **ViewModel**ï¼šå®Œå…¨å…±äº«ï¼Œä¸è¦ä¸ºä¸åŒUIåˆ›å»ºä¸åŒçš„ViewModel
4. **æ•°æ®æ¨¡å‹**ï¼šå®Œå…¨å…±äº«

### 6.3 æ‰©å±•æ–°UIç‰ˆæœ¬

æ·»åŠ ç¬¬ä¸‰ä¸ªUIç‰ˆæœ¬çš„æ­¥éª¤ï¼š

1. åˆ›å»ºç›®å½•ï¼š`src/ui_style3/`
2. å®ç°å­ç±»ï¼š`FunctionFragmentStyle3.kt`
3. åˆ›å»ºç±»å‹åˆ«åï¼š`FunctionFragment.kt`
4. åœ¨ `build.gradle.kts` ä¸­æ·»åŠ  `"style3"` åˆ†æ”¯
5. åˆ›å»ºå¯¹åº”çš„å¸ƒå±€èµ„æº

### 6.4 è°ƒè¯•æŠ€å·§

```bash
# æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„SourceSet
./gradlew :tuotuotie:sourceSets

# æŸ¥çœ‹æ„å»ºé…ç½®
./gradlew :tuotuotie:dependencies --configuration debugRuntimeClasspath

# æ¸…ç†å¹¶é‡æ–°æ„å»º
./gradlew clean build -PUI_STYLE=style1
```

---

## ğŸ” ä¸ƒã€å¸¸è§é—®é¢˜

### Q1: ç¼–è¯‘æ—¶æ‰¾ä¸åˆ°å¯¹åº”çš„Fragmentç±»ï¼Ÿ

**A**: æ£€æŸ¥ `build.gradle.kts` ä¸­çš„ `when (uiStyle)` åˆ†æ”¯æ˜¯å¦æ­£ç¡®é…ç½®äº†å¯¹åº”çš„ç›®å½•ã€‚

### Q2: ä¸¤ä¸ªUIç‰ˆæœ¬çš„å¸ƒå±€IDä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ

**A**: å¦‚æœå¸ƒå±€å·®å¼‚å¾ˆå¤§ï¼Œå¯ä»¥åœ¨å­ç±»ä¸­ä½¿ç”¨ `findViewById` è€Œä¸æ˜¯ ViewBindingï¼Œæˆ–è€…ä¸ºä¸åŒUIç‰ˆæœ¬ä½¿ç”¨ä¸åŒçš„å¸ƒå±€æ–‡ä»¶åã€‚

### Q3: å¦‚ä½•æµ‹è¯•ä¸¤ä¸ªUIç‰ˆæœ¬ï¼Ÿ

**A**: å¯ä»¥åŒæ—¶ç¼–è¯‘ä¸¤ä¸ªAPKï¼Œåˆ†åˆ«å®‰è£…åˆ°ä¸åŒè®¾å¤‡æˆ–ä½¿ç”¨ä¸åŒçš„åº”ç”¨IDåç¼€è¿›è¡Œæµ‹è¯•ã€‚

### Q4: èƒ½å¦åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢ï¼Ÿ

**A**: æœ¬æ–¹æ¡ˆæ˜¯ç¼–è¯‘æ—¶ç¡®å®šçš„ï¼Œå¦‚æœéœ€è¦è¿è¡Œæ—¶åˆ‡æ¢ï¼Œå»ºè®®ä½¿ç”¨å…¶ä»–æ–¹æ¡ˆï¼ˆå¦‚é…ç½®ç±» + å·¥å‚æ¨¡å¼ï¼‰ã€‚

### Q5: Gitåˆ†æ”¯æ–¹æ¡ˆå’ŒSourceSetæ–¹æ¡ˆå“ªä¸ªæ›´å¥½ï¼Ÿ

**A**: è¿™å–å†³äºä½ çš„å…·ä½“åœºæ™¯ï¼š

**é€‰æ‹©SourceSetæ–¹æ¡ˆï¼Œå¦‚æœ**ï¼š
- âœ… éœ€è¦é•¿æœŸç»´æŠ¤å¤šä¸ªUIç‰ˆæœ¬
- âœ… ä¸šåŠ¡é€»è¾‘ä¼šé¢‘ç¹æ›´æ–°
- âœ… å›¢é˜Ÿè§„æ¨¡è¾ƒå°ï¼Œæ— æ³•åŒæ—¶ç»´æŠ¤å¤šä¸ªåˆ†æ”¯
- âœ… UIç‰ˆæœ¬ä¹‹é—´å…±äº«å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘
- âœ… å¸Œæœ›ä»£ç å¤ç”¨æœ€å¤§åŒ–

**é€‰æ‹©Gitåˆ†æ”¯æ–¹æ¡ˆï¼Œå¦‚æœ**ï¼š
- âœ… UIç‰ˆæœ¬å·®å¼‚æå¤§ï¼Œå‡ ä¹å®Œå…¨ä¸åŒçš„åº”ç”¨
- âœ… UIç‰ˆæœ¬æ˜¯ä¸´æ—¶æ€§çš„ï¼ˆå¦‚çŸ­æœŸA/Bæµ‹è¯•ï¼‰
- âœ… ä¸åŒUIç‰ˆæœ¬ç”±ä¸åŒå›¢é˜Ÿç‹¬ç«‹ç»´æŠ¤
- âœ… UIç‰ˆæœ¬ä¹‹é—´ä¸éœ€è¦å…±äº«ä¸šåŠ¡é€»è¾‘æ›´æ–°
- âœ… å¸Œæœ›ä»£ç å®Œå…¨éš”ç¦»

**ä¸€èˆ¬å»ºè®®**ï¼šå¯¹äºå¤§å¤šæ•°åœºæ™¯ï¼Œ**SourceSetæ–¹æ¡ˆæ›´ä¼˜**ï¼Œå› ä¸ºå®ƒèƒ½æœ€å¤§åŒ–ä»£ç å¤ç”¨ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚

### Q6: èƒ½å¦æ··åˆä½¿ç”¨Gitåˆ†æ”¯å’ŒSourceSetï¼Ÿ

**A**: å¯ä»¥ï¼Œä½†ä¸æ¨èã€‚ä¾‹å¦‚ï¼š
- ä¸»åˆ†æ”¯ä½¿ç”¨SourceSetç®¡ç†å¤šä¸ªUIç‰ˆæœ¬
- ä¸ºç‰¹æ®Šå®éªŒæ€§UIåˆ›å»ºä¸´æ—¶åˆ†æ”¯

ä½†è¿™æ ·ä¼šå¢åŠ å¤æ‚æ€§ï¼Œå»ºè®®é€‰æ‹©ä¸€ç§æ–¹æ¡ˆå¹¶åšæŒä½¿ç”¨ã€‚

### Q7: Gitåˆ†æ”¯æ–¹æ¡ˆä¸­å¦‚ä½•åŒæ­¥ä¸šåŠ¡é€»è¾‘æ›´æ–°ï¼Ÿ

**A**: éœ€è¦æ‰‹åŠ¨åˆå¹¶ï¼š
```bash
# åœ¨mainåˆ†æ”¯æ›´æ–°ä¸šåŠ¡é€»è¾‘
git checkout main
# ... ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ ...
git commit -m "æ›´æ–°ä¸šåŠ¡é€»è¾‘"

# åˆå¹¶åˆ°UIé£æ ¼1åˆ†æ”¯
git checkout feature/ui-style1
git merge main  # å¯èƒ½éœ€è¦è§£å†³å†²çª

# åˆå¹¶åˆ°UIé£æ ¼2åˆ†æ”¯
git checkout feature/ui-style2
git merge main  # å¯èƒ½éœ€è¦è§£å†³å†²çª
```

è¿™å°±æ˜¯Gitåˆ†æ”¯æ–¹æ¡ˆçš„ä¸»è¦ç—›ç‚¹ï¼šæ¯æ¬¡ä¸šåŠ¡é€»è¾‘æ›´æ–°éƒ½éœ€è¦æ‰‹åŠ¨åˆå¹¶åˆ°æ‰€æœ‰åˆ†æ”¯ã€‚

---

## ğŸ¯ åã€ç»¼åˆç»“è®ºä¸æ¨è

### 10.1 ç»¼åˆè¯„åˆ†å¯¹æ¯”

| è¯„ä¼°ç»´åº¦ | Fragmentç»§æ‰¿ | Viewæ¥å£ | Gitåˆ†æ”¯ | è¿è¡Œæ—¶åˆ‡æ¢ |
|---------|-------------|---------|---------|-----------|
| **ä»£ç å¤ç”¨** | â­â­â­â­â­ (100%) | â­â­â­â­â­ (100%) | â­ (0%ï¼Œéœ€æ‰‹åŠ¨åŒæ­¥) | â­â­â­â­â­ (100%) |
| **ç»´æŠ¤æˆæœ¬** | â­â­â­â­â­ (ä½) | â­â­â­â­ (ä¸­ä½) | â­â­ (é«˜) | â­â­â­ (ä¸­) |
| **å¼€å‘æ•ˆç‡** | â­â­â­â­â­ (é«˜) | â­â­â­â­ (ä¸­é«˜) | â­â­ (ä½) | â­â­â­ (ä¸­) |
| **å›¢é˜Ÿåä½œ** | â­â­â­â­â­ (ç®€å•) | â­â­â­â­ (ç®€å•) | â­â­ (å¤æ‚) | â­â­â­â­ (ç®€å•) |
| **æ€§èƒ½è¡¨ç°** | â­â­â­â­â­ (æœ€ä¼˜) | â­â­â­â­â­ (æœ€ä¼˜) | â­â­â­â­â­ (æœ€ä¼˜) | â­â­â­ (æœ‰å¼€é”€) |
| **å­¦ä¹ æ›²çº¿** | â­â­â­ (ä¸­ç­‰) | â­â­ (è¾ƒé«˜) | â­â­â­â­â­ (ç®€å•) | â­â­ (è¾ƒéš¾) |
| **æ‰©å±•æ€§** | â­â­â­â­â­ (ä¼˜ç§€) | â­â­â­â­â­ (ä¼˜ç§€) | â­â­â­ (ä¸€èˆ¬) | â­â­â­â­ (è‰¯å¥½) |
| **æ¶æ„ä¼˜é›…** | â­â­â­â­ (è‰¯å¥½) | â­â­â­â­â­ (ä¼˜ç§€) | â­â­ (ä¸€èˆ¬) | â­â­â­ (è‰¯å¥½) |
| **ç»¼åˆå¾—åˆ†** | **â­â­â­â­â­ (36/40)** | **â­â­â­â­â­ (35/40)** | **â­â­ (14/40)** | **â­â­â­ (24/40)** |

### 10.2 æœ€ç»ˆæ¨è

#### ğŸ† **é¦–é€‰æ–¹æ¡ˆï¼šSourceSet + Fragmentç»§æ‰¿**

**æ¨èç†ç”±**ï¼š

1. **ä»£ç å¤ç”¨ç‡100%** 
   - ä¸šåŠ¡é€»è¾‘å®Œå…¨å…±äº«ï¼Œä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰UIç‰ˆæœ¬è‡ªåŠ¨å—ç›Š
   - é¿å…ä»£ç é‡å¤ï¼Œé™ä½Bugé£é™©

2. **ç»´æŠ¤æˆæœ¬æœ€ä½**
   - åªéœ€ç»´æŠ¤ä¸€å¥—ä¸šåŠ¡é€»è¾‘ä»£ç 
   - Bugä¿®å¤å’Œæ–°åŠŸèƒ½å¼€å‘åªéœ€ä¸€æ¬¡ï¼Œæ‰€æœ‰ç‰ˆæœ¬åŒæ­¥æ›´æ–°
   - å‡å°‘90%çš„ç»´æŠ¤å·¥ä½œé‡

3. **å¼€å‘æ•ˆç‡æœ€é«˜**
   - ä¸šåŠ¡é€»è¾‘æ›´æ–°é›¶æˆæœ¬åŒæ­¥åˆ°æ‰€æœ‰UIç‰ˆæœ¬
   - æ— åˆå¹¶å†²çªï¼Œæ— æ‰‹åŠ¨åŒæ­¥å·¥ä½œ
   - å›¢é˜Ÿåä½œç®€å•ï¼Œä»£ç é›†ä¸­ç®¡ç†

4. **æ€§èƒ½æœ€ä¼˜**
   - ç¼–è¯‘æ—¶ç¡®å®šï¼Œé›¶è¿è¡Œæ—¶å¼€é”€
   - ç¼–è¯‘äº§ç‰©åªåŒ…å«é€‰ä¸­çš„UIï¼Œä½“ç§¯æœ€å°
   - å¯åŠ¨é€Ÿåº¦å’Œè¿è¡Œæ€§èƒ½æœ€ä¼˜

5. **æ‰©å±•æ€§å¼º**
   - æ·»åŠ æ–°UIç‰ˆæœ¬åªéœ€æ–°å¢ç›®å½•å’Œå®ç°
   - ä¸å½±å“ç°æœ‰UIç‰ˆæœ¬
   - æ˜“äºç®¡ç†å’Œç»´æŠ¤

6. **ä»£ç ç»“æ„ç®€å•**
   - åŸºç±»+å­ç±»ï¼Œç»“æ„æ¸…æ™°æ˜“æ‡‚
   - ç¬¦åˆAndroidå¼€å‘ä¹ æƒ¯
   - å­¦ä¹ æˆæœ¬ä½

#### ğŸ¥ˆ **å¤‡é€‰æ–¹æ¡ˆï¼šSourceSet + Viewæ¥å£**

**é€‚ç”¨åœºæ™¯**ï¼š
- éœ€è¦**é«˜åº¦è§£è€¦**çš„æ¶æ„è®¾è®¡
- Viewé€»è¾‘éœ€è¦åœ¨**å¤šä¸ªFragmentä¸­å¤ç”¨**
- å›¢é˜Ÿæ›´å€¾å‘äº**ç»„åˆä¼˜äºç»§æ‰¿**çš„è®¾è®¡ç†å¿µ
- éœ€è¦**è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢**UIç‰ˆæœ¬ï¼ˆé€šè¿‡å·¥å‚æ¨¡å¼ï¼‰

**ä¼˜åŠ¿**ï¼š
- âœ… æ›´ç¬¦åˆSOLIDåŸåˆ™ï¼ˆä¾èµ–å€’ç½®ã€å•ä¸€èŒè´£ï¼‰
- âœ… Viewå®ç°ç±»å¯ä»¥ç‹¬ç«‹æµ‹è¯•
- âœ… Viewé€»è¾‘ä¸Fragmentå®Œå…¨åˆ†ç¦»
- âœ… æ¶æ„æ›´ä¼˜é›…ï¼ŒèŒè´£æ›´æ¸…æ™°

**åŠ£åŠ¿**ï¼š
- âŒ ä»£ç ç»“æ„æ›´å¤æ‚ï¼ˆæ¥å£+å®ç°ç±»+Fragmentï¼‰
- âŒ å®ç°æˆæœ¬è¾ƒé«˜
- âŒ å­¦ä¹ æ›²çº¿è¾ƒé™¡

#### âš ï¸ **è°¨æ…ä½¿ç”¨ï¼šGitåˆ†æ”¯æ–¹æ¡ˆ**

**é€‚ç”¨åœºæ™¯**ï¼ˆä»…é™ä»¥ä¸‹æƒ…å†µï¼‰ï¼š
- UIç‰ˆæœ¬å·®å¼‚æå¤§ï¼Œå‡ ä¹å®Œå…¨ä¸åŒçš„åº”ç”¨
- ä¸´æ—¶æ€§å®éªŒï¼ˆå¦‚çŸ­æœŸA/Bæµ‹è¯•ï¼Œæµ‹è¯•å®Œå³åˆ é™¤åˆ†æ”¯ï¼‰
- ä¸åŒUIç‰ˆæœ¬ç”±ä¸åŒå›¢é˜Ÿç‹¬ç«‹ç»´æŠ¤ï¼Œä¸”ä¸éœ€è¦å…±äº«ä¸šåŠ¡é€»è¾‘

**ä¸æ¨èçš„åŸå› **ï¼š
- âŒ ä¸šåŠ¡é€»è¾‘æ›´æ–°éœ€è¦æ‰‹åŠ¨åˆå¹¶åˆ°æ¯ä¸ªåˆ†æ”¯ï¼Œå·¥ä½œé‡å¤§
- âŒ åˆå¹¶å†²çªé¢‘ç¹ï¼Œè§£å†³å†²çªè€—æ—¶
- âŒ ç»´æŠ¤æˆæœ¬é«˜ï¼Œå®¹æ˜“é—æ¼æŸä¸ªåˆ†æ”¯çš„æ›´æ–°
- âŒ å›¢é˜Ÿåä½œå›°éš¾ï¼Œå®¹æ˜“åœ¨é”™è¯¯åˆ†æ”¯ä¸Šå·¥ä½œ

### 10.3 é’ˆå¯¹ä½ çš„åœºæ™¯çš„å»ºè®®

**ä½ çš„æƒ…å†µ**ï¼šä»£ç é€»è¾‘ç›¸åŒï¼Œä½†UIæœ‰ä¸¤ä¸ªç‰ˆæœ¬

#### æ–¹æ¡ˆé€‰æ‹©å»ºè®®

**é¦–é€‰ï¼šSourceSet + Fragmentç»§æ‰¿** â­â­â­â­â­

**åŸå› **ï¼š
1. âœ… **å®Œå…¨ç¬¦åˆä½ çš„éœ€æ±‚**
   - ä»£ç é€»è¾‘ç›¸åŒ â†’ èƒ½100%å¤ç”¨ä¸šåŠ¡é€»è¾‘
   - UIæœ‰ä¸¤ä¸ªç‰ˆæœ¬ â†’ é€šè¿‡SourceSetè½»æ¾ç®¡ç†ä¸¤ä¸ªUIç‰ˆæœ¬

2. âœ… **é•¿æœŸæ”¶ç›Šæœ€å¤§**
   - æœªæ¥ä¸šåŠ¡é€»è¾‘æ›´æ–°æ—¶ï¼Œä¸¤ä¸ªUIç‰ˆæœ¬è‡ªåŠ¨åŒæ­¥
   - ç»´æŠ¤æˆæœ¬æœ€ä½ï¼Œåªéœ€ç»´æŠ¤ä¸€å¥—ä¸šåŠ¡é€»è¾‘
   - å›¢é˜Ÿåä½œç®€å•ï¼Œä»£ç é›†ä¸­ç®¡ç†

3. âœ… **ä¸ä½ ç°æœ‰æ¶æ„å…¼å®¹**
   - ä½ å·²ç»ä½¿ç”¨ `CAR_PLATFORM_TYPE` æœºåˆ¶é€‰æ‹©å¹³å°
   - SourceSetæ–¹æ¡ˆå¯ä»¥æ— ç¼é›†æˆï¼Œä½¿ç”¨ç›¸åŒçš„é…ç½®æ–¹å¼
   - å­¦ä¹ æˆæœ¬ä½ï¼Œå›¢é˜Ÿå®¹æ˜“æ¥å—

4. âœ… **æœªæ¥æ‰©å±•å®¹æ˜“**
   - å¦‚æœéœ€è¦ç¬¬ä¸‰ä¸ªUIç‰ˆæœ¬ï¼Œåªéœ€æ·»åŠ  `ui_style3` ç›®å½•
   - ä¸éœ€è¦åˆ›å»ºæ–°åˆ†æ”¯ï¼Œä¸éœ€è¦åˆå¹¶ä»£ç 
   - æ‰©å±•æˆæœ¬å‡ ä¹ä¸ºé›¶

5. âœ… **ä»£ç ç»“æ„ç®€å•**
   - åŸºç±»+å­ç±»ï¼Œç»“æ„æ¸…æ™°
   - ç¬¦åˆAndroidå¼€å‘ä¹ æƒ¯
   - æ˜“äºç†è§£å’Œç»´æŠ¤

**å¤‡é€‰ï¼šSourceSet + Viewæ¥å£** â­â­â­â­

**è€ƒè™‘ä½¿ç”¨ï¼Œå¦‚æœ**ï¼š
- ä½ çš„Viewé€»è¾‘éå¸¸å¤æ‚ï¼Œéœ€è¦ç‹¬ç«‹ç®¡ç†
- æœªæ¥å¯èƒ½éœ€è¦å°†Viewé€»è¾‘å¤ç”¨åˆ°å…¶ä»–Fragment
- å›¢é˜Ÿæ›´å€¾å‘äºç»„åˆä¼˜äºç»§æ‰¿çš„è®¾è®¡ç†å¿µ
- éœ€è¦è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢UIç‰ˆæœ¬

**ä¸æ¨èï¼šGitåˆ†æ”¯æ–¹æ¡ˆ** â­â­

**åŸå› **ï¼š
- âŒ ä¸šåŠ¡é€»è¾‘æ›´æ–°éœ€è¦æ‰‹åŠ¨åˆå¹¶ï¼Œå·¥ä½œé‡å¤§
- âŒ ç»´æŠ¤æˆæœ¬é«˜ï¼Œå®¹æ˜“é—æ¼æ›´æ–°
- âŒ ä¸ç¬¦åˆä½ çš„éœ€æ±‚ï¼ˆä»£ç é€»è¾‘ç›¸åŒï¼‰

### 10.4 å®æ–½å»ºè®®

**ç¬¬ä¸€æ­¥ï¼šè¯„ä¼°ç°æœ‰ä»£ç **
- æ£€æŸ¥ç°æœ‰UIä»£ç ç»“æ„
- è¯†åˆ«å¯å¤ç”¨çš„ä¸šåŠ¡é€»è¾‘
- ç¡®å®šUIå·®å¼‚ç‚¹

**ç¬¬äºŒæ­¥ï¼šé‡æ„ä¸ºåŸºç±»+å­ç±»**
- åˆ›å»º `BaseFunctionFragment` åŸºç±»
- å°†ä¸šåŠ¡é€»è¾‘è¿ç§»åˆ°åŸºç±»
- åˆ›å»ºUIå­ç±»å®ç°

**ç¬¬ä¸‰æ­¥ï¼šé…ç½®SourceSet**
- åœ¨ `build.gradle.kts` ä¸­æ·»åŠ SourceSeté…ç½®
- åˆ›å»º `ui_style1` å’Œ `ui_style2` ç›®å½•
- é…ç½®ç¼–è¯‘å‚æ•°

**ç¬¬å››æ­¥ï¼šæµ‹è¯•éªŒè¯**
- åˆ†åˆ«ç¼–è¯‘ä¸¤ä¸ªUIç‰ˆæœ¬
- éªŒè¯åŠŸèƒ½ä¸€è‡´æ€§
- ç¡®è®¤ä¸šåŠ¡é€»è¾‘æ­£ç¡®åŒæ­¥

**é¢„æœŸæ”¶ç›Š**ï¼š
- ğŸ“ˆ ä»£ç å¤ç”¨ç‡ï¼šä»0%æå‡åˆ°100%
- ğŸ“‰ ç»´æŠ¤æˆæœ¬ï¼šé™ä½70-90%
- âš¡ å¼€å‘æ•ˆç‡ï¼šæå‡50%ä»¥ä¸Š
- ğŸ¯ Bugä¿®å¤ï¼šä¸€æ¬¡ä¿®å¤ï¼Œæ‰€æœ‰ç‰ˆæœ¬å—ç›Š

---

## ğŸ“š å…«ã€å‚è€ƒèµ„æ–™

- [Android Gradle Source Sets](https://developer.android.com/studio/build/build-variants#sourcesets)
- [Kotlin Type Aliases](https://kotlinlang.org/docs/type-aliases.html)
- [Template Method Pattern](https://refactoring.guru/design-patterns/template-method)
- [Android Fragment Best Practices](https://developer.android.com/guide/fragments)

---

## ğŸ“ ä¹ã€æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| 2025-01 | 1.0 | åˆå§‹ç‰ˆæœ¬ï¼Œå®ç°SourceSet + Fragmentç»§æ‰¿æ–¹æ¡ˆ |

---

**æ–‡æ¡£ç»´æŠ¤è€…**ï¼šå¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**ï¼š2025å¹´1æœˆ

