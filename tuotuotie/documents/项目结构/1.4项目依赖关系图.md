# SmartLife项目依赖关系图

## 项目模块依赖关系图

```mermaid
graph TD
    A[app<br/>主应用模块] --> B[instrumentpanel<br/>仪表盘模块]
    A --> C[tuotuotie<br/>核心业务模块]
    A --> D[baselibrary<br/>基础库模块]

    C --> E[tuotuotie_car_interface_library<br/>车机接口库]
    C --> D

    F{TuoTuoTieTinnoveCarImplLibrary<br/>梧桐车机实现库} --> E
    F --> D

    G[TuoTuoTieMeijiaCarImpLibrary<br/>镁佳车机实现库] --> E
    G --> D

    C -.->|动态选择| F
    C -.->|动态选择| G

    B --> H[镁佳SDK AAR文件]
    F --> I[梧桐SDK AAR文件]
    G --> J[镁佳SDK AAR文件]

    style A fill:#e1f5fe,stroke:#01579b,stroke-width:3px,color:#000
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style D fill:#e8f5e8,stroke:#1b5e20,stroke-width:3px,color:#000
    style E fill:#fff3e0,stroke:#e65100,stroke-width:3px,color:#000
    style F fill:#fce4ec,stroke:#880e4f,stroke-width:3px,color:#000
    style G fill:#fce4ec,stroke:#880e4f,stroke-width:3px,color:#000
    style H fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#000
    style I fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    style J fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#000
```

### 模块说明

- **app**: 主应用模块，包含应用入口和主要UI
- **instrumentpanel**: 仪表盘模块，负责仪表盘相关功能
- **tuotuotie**: 核心业务模块，包含主要业务逻辑
- **baselibrary**: 基础库模块，提供通用工具和基础功能
- **tuotuotie_car_interface_library**: 车机接口库，定义车机相关接口
- **TuoTuoTieTinnoveCarImplLibrary**: 梧桐车机实现库
- **TuoTuoTieMeijiaCarImpLibrary**: 镁佳车机实现库

## 车机平台动态选择流程图

```mermaid
flowchart TD
    A[项目构建开始] --> B{检查CAR_PLATFORM_TYPE}
    B -->|tinnove| C[选择梧桐车机实现]
    B -->|其他值| D[选择镁佳车机实现]

    C --> E[TuoTuoTieTinnoveCarImplLibrary]
    D --> F[TuoTuoTieMeijiaCarImpLibrary]

    E --> G[加载梧桐SDK]
    F --> H[加载镁佳SDK]

    G --> I[android.car8678.jar]
    G --> J[virtualcar-platform.aar]
    G --> K[offline_C518.jar]

    H --> L[bigsur-car-lib.aar]
    H --> M[carlib-new.aar]
    H --> N[MLog.aar]
    H --> O[nexus-static.jar]
    H --> P[smartlifemiddleware.aar]

    style A fill:#e1f5fe,stroke:#01579b,stroke-width:4px,color:#000
    style B fill:#fff3e0,stroke:#e65100,stroke-width:3px,color:#000
    style C fill:#e8f5e8,stroke:#1b5e20,stroke-width:3px,color:#000
    style D fill:#fce4ec,stroke:#880e4f,stroke-width:3px,color:#000
    style E fill:#e8f5e8,stroke:#1b5e20,stroke-width:3px,color:#000
    style F fill:#fce4ec,stroke:#880e4f,stroke-width:3px,color:#000
    style G fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    style H fill:#fce4ec,stroke:#ad1457,stroke-width:2px,color:#000
    style I fill:#c8e6c9,stroke:#388e3c,stroke-width:2px,color:#000
    style J fill:#c8e6c9,stroke:#388e3c,stroke-width:2px,color:#000
    style K fill:#c8e6c9,stroke:#388e3c,stroke-width:2px,color:#000
    style L fill:#f8bbd9,stroke:#c2185b,stroke-width:2px,color:#000
    style M fill:#f8bbd9,stroke:#c2185b,stroke-width:2px,color:#000
    style N fill:#f8bbd9,stroke:#c2185b,stroke-width:2px,color:#000
    style O fill:#f8bbd9,stroke:#c2185b,stroke-width:2px,color:#000
    style P fill:#f8bbd9,stroke:#c2185b,stroke-width:2px,color:#000
```

### 流程说明

1. **项目构建开始**: 启动Gradle构建过程
2. **检查CAR_PLATFORM_TYPE**: 读取gradle.properties中的车机平台类型配置
3. **平台选择**:
   - 如果值为`tinnove`，选择梧桐车机实现
   - 其他值则选择镁佳车机实现
4. **加载对应实现库**: 根据选择加载相应的车机实现库
5. **加载SDK文件**: 加载对应平台的SDK文件

### 颜色说明

- **蓝色系**: 主应用和构建流程
- **绿色系**: 梧桐车机相关模块和SDK
- **粉色系**: 镁佳车机相关模块和SDK
- **橙色系**: 决策节点
- **紫色系**: 核心业务模块
- **青色系**: 基础库和工具

所有文字都设置为黑色以确保在彩色背景上的可读性。
